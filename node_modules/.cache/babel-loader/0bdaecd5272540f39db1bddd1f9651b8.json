{"ast":null,"code":"import axios from 'axios';\nlet BASE_URL = 'https://dry-falls-41890.herokuapp.com/api/v1';\n\nif (process.env.NODE_ENV === 'development') {\n  BASE_URL = `https://dry-falls-41890.herokuapp.com/api/v1`;\n}\n\naxios.interceptors.response.use(resp => resp, async err => {\n  if (err.response.status === 401) {\n    const response = await axios.post('refresh', {}, {\n      withCredentials: true\n    });\n\n    if (response.status === 200) {\n      axios.defaults.headers.common.Authorization = `Bearer ${response.data.accessToken}`;\n      return axios(err.config);\n    }\n  }\n\n  return err;\n});\nexport default BASE_URL;","map":{"version":3,"sources":["/Users/primalaero/investment/src/Util/API.js"],"names":["axios","BASE_URL","process","env","NODE_ENV","interceptors","response","use","resp","err","status","post","withCredentials","defaults","headers","common","Authorization","data","accessToken","config"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,IAAIC,QAAQ,GAAG,8CAAf;;AACA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1CH,EAAAA,QAAQ,GAAI,8CAAZ;AACD;;AAGDD,KAAK,CAACK,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgCC,IAAI,IAAGA,IAAvC,EAA6C,MAAMC,GAAN,IAAY;AACvD,MAAGA,GAAG,CAACH,QAAJ,CAAaI,MAAb,KAAwB,GAA3B,EAA+B;AAC7B,UAAMJ,QAAQ,GAAG,MAAMN,KAAK,CAACW,IAAN,CAAW,SAAX,EAAsB,EAAtB,EAA0B;AAACC,MAAAA,eAAe,EAAE;AAAlB,KAA1B,CAAvB;;AAEA,QAAGN,QAAQ,CAACI,MAAT,KAAoB,GAAvB,EAA2B;AACzBV,MAAAA,KAAK,CAACa,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,GAA+C,UAASV,QAAQ,CAACW,IAAT,CAAcC,WAAY,EAAlF;AACA,aAAOlB,KAAK,CAACS,GAAG,CAACU,MAAL,CAAZ;AACD;AACF;;AACD,SAAOV,GAAP;AAED,CAXD;AAeA,eAAeR,QAAf","sourcesContent":["import axios from 'axios';\r\n\r\n\r\nlet BASE_URL = 'https://dry-falls-41890.herokuapp.com/api/v1';\r\nif (process.env.NODE_ENV === 'development') {\r\n  BASE_URL = `https://dry-falls-41890.herokuapp.com/api/v1`;\r\n}\r\n\r\n\r\naxios.interceptors.response.use(resp=> resp, async err=> {\r\n  if(err.response.status === 401){\r\n    const response = await axios.post('refresh', {}, {withCredentials: true});\r\n\r\n    if(response.status === 200){\r\n      axios.defaults.headers.common.Authorization = `Bearer ${response.data.accessToken}`;\r\n      return axios(err.config);\r\n    }\r\n  }\r\n  return err;\r\n\r\n})\r\n\r\n\r\n\r\nexport default BASE_URL;\r\n"]},"metadata":{},"sourceType":"module"}