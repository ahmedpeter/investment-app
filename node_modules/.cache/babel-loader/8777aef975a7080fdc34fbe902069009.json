{"ast":null,"code":"import _regeneratorRuntime from\"/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import Typography from\"@mui/material/Typography\";import Modal from\"@mui/material/Modal\";import CreditScoreIcon from\"@mui/icons-material/CreditScore\";import CurrencyExchangeIcon from\"@mui/icons-material/CurrencyExchange\";import Box from\"@mui/material/Box\";import moment from\"moment\";import API from\"../../Util/API\";import FileCopyIcon from\"@mui/icons-material/FileCopy\";import AddIcon from\"@mui/icons-material/Add\";import ErrorOutlineIcon from\"@mui/icons-material/ErrorOutline\";import{Avatar,IconButton}from\"@material-ui/core\";import Table from\"@mui/material/Table\";import TableBody from\"@mui/material/TableBody\";import TableCell from\"@mui/material/TableCell\";import TableContainer from\"@mui/material/TableContainer\";import TableHead from\"@mui/material/TableHead\";import TableRow from\"@mui/material/TableRow\";import Paper from\"@mui/material/Paper\";import{FileUploader,DownloadFile}from\"../../Util/FileUploader\";import AddCardIcon from\"@mui/icons-material/AddCard\";import AssignmentIcon from\"@mui/icons-material/Assignment\";import axios from\"axios\";import{useHistory}from\"react-router-dom\";import{useLoading,Oval}from\"@agney/react-loading\";import{format}from\"date-fns\";import numberFormat from\"../../Util/CurrencyFormatter\";import BASE_URL from\"../../Util/API\";import{useParams,useLocation}from\"react-router-dom\";import FormControl from\"@mui/material/FormControl\";import InputLabel from\"@mui/material/InputLabel\";import{CLoadingButton}from\"@coreui/react-pro\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import\"./Pages.scss\";// import {FileUploader, DownloadFile} from \"../../Util/FileUploader\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var style={position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",width:800,bgcolor:\"background.paper\",boxShadow:24,p:4};function InvestorDetails(){var payLoan={amount_to_remit:0};var loanStatusx={status:\"\"};// const getStartDate=()=>{\n//   return ;\n// }\nvar max_duration=14;var plan=\"Delux\";var interest=30;var maturity_date=moment().add(14,\"days\").format(\"MM-DD-YYYY\");var _useParams=useParams(),id=_useParams.id;// const location = useLocation();\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),totalInvestment=_useState4[0],setTotalInvestment=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),TakeLoanBtn=_useState6[0],setTakeLoanBtn=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toaster=_useState8[0],setToaster=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loader=_useState10[0],setLoader=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),loanHistory=_useState12[0],setLoanHistory=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),payments=_useState14[0],setPayments=_useState14[1];var _useState15=useState(\"bc1qh25jnm4h6fqdmh0qxd8c8cmlqpxgdhtsaw5jgj\"),_useState16=_slicedToArray(_useState15,2),textToCopy=_useState16[0],setTextToCopy=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),btnDisabled=_useState18[0],setBtnDisabled=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),copied=_useState20[0],setCopied=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),open=_useState22[0],setOpen=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),superAdmin=_useState24[0],setSuperAdmin=_useState24[1];var handleClose=function handleClose(){return setOpen(false);};var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),newDepositModal=_useState26[0],setNewDepositModal=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),openInvestmentToUpdate=_useState28[0],setOpenInvestmentToUpdate=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),uploadPhoto=_useState30[0],setUploadPhoto=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),uploadDoc=_useState32[0],setUploadDoc=_useState32[1];var handleAvataModalClose=function handleAvataModalClose(){return setUploadPhoto(false);};var handleDocumentModalClose=function handleDocumentModalClose(){return setUploadDoc(false);};var _useState33=useState(),_useState34=_slicedToArray(_useState33,2),newAvatar=_useState34[0],setNewAvatar=_useState34[1];var _useState35=useState(),_useState36=_slicedToArray(_useState35,2),newDocument=_useState36[0],setNewDocument=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),newDWithdrawalModal=_useState38[0],setWithdrawalModal=_useState38[1];var handleWithdrawalFormClose=function handleWithdrawalFormClose(){return setWithdrawalModal(false);};var handleFormClose=function handleFormClose(){return setNewDepositModal(false);};var handleUpdateInvestmentFormClose=function handleUpdateInvestmentFormClose(){return setOpenInvestmentToUpdate(false);};// const [newInvestment, setNewInvestment] = useState(investmentDetails);\n// const handleFormClose = () => setNewLoanModal(false);\nvar _useState39=useState(0),_useState40=_slicedToArray(_useState39,2),paidBack=_useState40[0],setPaidBack=_useState40[1];var _useState41=useState(),_useState42=_slicedToArray(_useState41,2),loanId=_useState42[0],setLoanId=_useState42[1];var _useState43=useState({}),_useState44=_slicedToArray(_useState43,2),loanToUpdate=_useState44[0],setLoanToUpdate=_useState44[1];var _useState45=useState([]),_useState46=_slicedToArray(_useState45,2),allInvestments=_useState46[0],setAllInvestments=_useState46[1];var _useState47=useState({}),_useState48=_slicedToArray(_useState47,2),investment=_useState48[0],setInvestment=_useState48[1];var _useState49=useState(parseInt(0)),_useState50=_slicedToArray(_useState49,2),amount=_useState50[0],setAmount=_useState50[1];var _useState51=useState(parseInt(0)),_useState52=_slicedToArray(_useState51,2),amount_to_withdraw=_useState52[0],setAmountToWithdraw=_useState52[1];var _useState53=useState(\"\"),_useState54=_slicedToArray(_useState53,2),proof_of_payment=_useState54[0],setProofOfPayment=_useState54[1];var _useState55=useState({}),_useState56=_slicedToArray(_useState55,2),investmentToUpdate=_useState56[0],setInvestmentToUpdate=_useState56[1];var _useLoading=useLoading({loading:true,indicator:/*#__PURE__*/_jsx(Oval,{width:\"50\"}),loaderProps:{valueText:\"Please wait, loading records\",style:{position:\"absolute\",left:\"50%\",top:\"50%\"}}}),indicatorEl=_useLoading.indicatorEl;var history=useHistory();useEffect(function(){fetchUserDetails();getUserInfo();},[]);var convertAmount=function convertAmount(e){setAmount(parseInt(e.target.value));};var getUserInfo=function getUserInfo(){var userInfo=localStorage.getItem(\"userInfo\");var user=JSON.parse(userInfo);console.log(user);if(user.data.role===\"admin\")setSuperAdmin(true);};var convertAmountToWithdraw=function convertAmountToWithdraw(e){setAmountToWithdraw(parseInt(e.target.value));};var copyToClipboard=function copyToClipboard(){navigator.clipboard.writeText(textToCopy).then(function(){setCopied(true);console.log(textToCopy);setTimeout(function(){setCopied(false);},2000);// Display 'Copied!' message for 2 seconds\n}).catch(function(err){console.error(\"Failed to copy: \",err);});};var updateInvestmentStatus=function updateInvestmentStatus(investmentId,val){console.log(investmentId,val);axios.put(\"\".concat(BASE_URL,\"/investment/\").concat(investmentId),{status:val}).then(function(response){console.log(response);toast.success(response.data.message);fetchUserDetails();handleFormClose();}).catch(function(error){console.log(error);toast.error(error.message);});console.log(investment);setInvestmentToUpdate(investment);};var handleUpdateStatusFormOpen=function handleUpdateStatusFormOpen(investment){console.log(investment);setOpenInvestmentToUpdate(true);setInvestment(investment);};var handleNewDepositSubmit=function handleNewDepositSubmit(e){e.preventDefault();console.log(typeof amount);axios.post(\"\".concat(BASE_URL,\"/investment/\").concat(id),{plan:plan,maturity_date:maturity_date,interest:interest,amount:amount,proof_of_payment:proof_of_payment}).then(function(response){console.log(response);toast.success(response.data.message);fetchUserDetails();handleFormClose();}).catch(function(error){console.log(error);toast.error(error.message);});};var handleWithdrawal=function handleWithdrawal(e){e.preventDefault();console.log(investment);// if(amount_to_withdraw > amount_invested){\n//   toast.error(\"You cant withdraw above \"+ amount_invested )\n//   return false\n// }\naxios.post(\"\".concat(BASE_URL,\"/investment/\").concat(id,\"/withdrawal/\").concat(investment.id),{amount_to_withdraw:amount_to_withdraw}).then(function(response){console.log(response);toast.success(response.data.message);fetchUserDetails();handleFormClose();}).catch(function(error){console.log(error);toast.error(error.message);});};var handleOpen=function handleOpen(loan){setLoanToUpdate(loan);setOpen(true);};var handleNewFormOpen=function handleNewFormOpen(id){setNewDepositModal(true);};var handleNewWithdrawalFormOpen=function handleNewWithdrawalFormOpen(investment){console.log(investment);setInvestment(investment);setWithdrawalModal(true);};var formatCurrency=function formatCurrency(value){return new Intl.NumberFormat(\"en-GB\",{style:\"currency\",currency:\"NGN\",maximumFractionDigits:0}).format(value);};// Easy(153hrs, 10times),  and Delux(7days, 15times), Mega(14days, 20times) Plan\nvar determineInvestorPlan=function determineInvestorPlan(amountToInvest){if(amountToInvest<=500){return amountToInvest*10;}else if(amountToInvest<=800){return amountToInvest*15;}else return amountToInvest*20;};var fetchUserDetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoader(true);_context.next=3;return axios.get(\"\".concat(BASE_URL,\"/user/\").concat(id)).then(function(response){var _response$data$result,_response$data$result2;setUser(response.data.results);if(response.data.results.profile_pic==null||response.data.results.profile_pic===\"\"){console.log(\"profile_pic isnt available\");setBtnDisabled(true);}console.log(response);setAllInvestments(response.data.results.investments);var tot=(_response$data$result=response.data.results)===null||_response$data$result===void 0?void 0:(_response$data$result2=_response$data$result.investments)===null||_response$data$result2===void 0?void 0:_response$data$result2.reduce(function(total,currentValue){return total=total+currentValue.amount;},0);setTotalInvestment(tot);setLoader(false);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function fetchUserDetails(){return _ref.apply(this,arguments);};}();var capitalizeFirstLetter=function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);};var getLoanHistories=function getLoanHistories(user_id){axios.get(\"\".concat(BASE_URL,\"/user/\").concat(user_id)).then(function(response){var data=response.data;setAllInvestments(data.results.sort(function(a,b){return a.created_at.split(\"-\").reverse().join().localeCompare(b.created_at.split(\"-\").reverse().join());}));setLoanId(data.results[data.results.length-1].id);// Activate Take new Loan Button Logic\nif(allInvestments.length>0){var prevRecord=data.results[data.results.length-1];if(prevRecord.status===\"closed\"||prevRecord.status===\"declined\"){setTakeLoanBtn(true);}}data.results.map(function(history){// Set the array to loop here\nsetLoanHistory(history===null||history===void 0?void 0:history.payments);var histories=history.payments;// totalPaidBack(history.payments);\nsetLoader(false);});}).catch(function(res){toast.error(res);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"account__detail\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"row m-t-xxl summary b-b mt-55\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary__left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:/*#__PURE__*/_jsx(Avatar,{src:\"\".concat(BASE_URL,\"/\").concat(user.profile_pic),style:{borderRadius:0}})}),/*#__PURE__*/_jsx(\"p\",{className:\"summary__label title-case pointer\",style:{color:btnDisabled?\"red\":\"\"},onClick:function onClick(){return setUploadPhoto(true);},children:\"Upload Photo\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title title-case\",children:[user===null||user===void 0?void 0:user.first_name,\" \",user===null||user===void 0?void 0:user.last_name]}),/*#__PURE__*/_jsx(\"p\",{className:\"summary__label lower-case\",children:user===null||user===void 0?void 0:user.email})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"summary__center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info plr-20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label\",children:\"Primary Contact\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title title-case\",children:[\" \",user===null||user===void 0?void 0:user.phone_1]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info plr-20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label\",children:\"Country\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"summary__title\",children:user===null||user===void 0?void 0:user.country})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info plr-20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label\",children:\"Wallet Type\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title\",children:[\" \",(user===null||user===void 0?void 0:user.wallet_type)?user===null||user===void 0?void 0:user.wallet_type:\"BitCoin\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info plr-20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label\",children:\"Joined\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title\",children:[\" \",(user===null||user===void 0?void 0:user.created_at)?format(new Date(user===null||user===void 0?void 0:user.created_at),\"PP\"):\"N/A\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"summary__right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label\",children:\"Total Invested\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title t-xl\",children:[\" \",numberFormat(totalInvestment)]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"summary__title t-xl m-5em\",children:\" Investment History\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn bg__green pull-right\",name:\"newLoan\"// disabled={btnDisabled}\n,onClick:function onClick(){return handleNewFormOpen();},children:[\" \",\"Invest Now!\"]})]}),/*#__PURE__*/_jsx(\"section\",{className:\"row-m summary al-base\",children:/*#__PURE__*/_jsx(\"div\",{className:\"summary__left w-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"header__info\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"row\",children:[allInvestments.length==0&&!loader&&/*#__PURE__*/_jsx(\"p\",{className:\"empty__record\",children:\"Oops! No Investments yet...\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"collapsible table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{children:\"Ref\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Investment\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Package\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Growth\"}),/*#__PURE__*/_jsx(TableCell,{children:\"duration\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Take Home\"}),/*#__PURE__*/_jsx(TableCell,{children:\" Date\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Maturity Date\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\" Action \"})]})}),/*#__PURE__*/_jsx(TableBody,{children:allInvestments===null||allInvestments===void 0?void 0:allInvestments.map(function(investment){return/*#__PURE__*/_jsxs(TableRow,{sx:{\"& > *\":{borderBottom:\"unset\"}},children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{className:\"upper-case\",children:investment===null||investment===void 0?void 0:investment.ref_no}),/*#__PURE__*/_jsx(TableCell,{children:numberFormat(investment===null||investment===void 0?void 0:investment.amount)}),/*#__PURE__*/_jsx(TableCell,{children:investment===null||investment===void 0?void 0:investment.plan}),/*#__PURE__*/_jsx(TableCell,{children:numberFormat((investment===null||investment===void 0?void 0:investment.interest)/100*investment.amount)}),/*#__PURE__*/_jsx(TableCell,{children:\"14 days\"}),/*#__PURE__*/_jsx(TableCell,{children:numberFormat((investment===null||investment===void 0?void 0:investment.interest)/100*investment.amount+investment.amount)}),/*#__PURE__*/_jsx(TableCell,{children:format(new Date(investment===null||investment===void 0?void 0:investment.created_at),\"PP\")}),/*#__PURE__*/_jsx(TableCell,{children:moment(investment===null||investment===void 0?void 0:investment.created_at).add(14,\"days\").format(\"ll\")}),/*#__PURE__*/_jsx(TableCell,{className:(investment===null||investment===void 0?void 0:investment.status)===\"pending\"||(investment===null||investment===void 0?void 0:investment.status)===\"declined\"?\"red title-case\":\"green title-case\",children:investment===null||investment===void 0?void 0:investment.status}),/*#__PURE__*/_jsxs(TableCell,{className:\"btn-group\",children:[!superAdmin&&((investment===null||investment===void 0?void 0:investment.status)===\"approved\"||(investment===null||investment===void 0?void 0:investment.status)===\"open\")&&/*#__PURE__*/_jsx(CurrencyExchangeIcon,{onClick:function onClick(){return handleNewWithdrawalFormOpen(investment);}}),superAdmin&&(investment===null||investment===void 0?void 0:investment.status)===\"pending\"&&/*#__PURE__*/_jsx(CreditScoreIcon,{onClick:function onClick(){return handleUpdateStatusFormOpen(investment);}})]})]},investment===null||investment===void 0?void 0:investment.id);})})]})})]})})})}),/*#__PURE__*/_jsx(Modal,{open:newDepositModal,onClose:handleFormClose,\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:/*#__PURE__*/_jsxs(Box,{sx:style,children:[/*#__PURE__*/_jsxs(Typography,{id:\"modal-modal-title\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"summary__title t-xl title-case\",children:\" Make a Deposit \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ErrorOutlineIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"sub-title\",children:\"Deposit in BitCoin the equivalent you wish to invest into the minning account below\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"loan-form p-lg\",onSubmit:handleNewDepositSubmit,children:[btnDisabled&&/*#__PURE__*/_jsxs(\"p\",{className:\"sub-title\",style:{color:\"red\",marginBottom:7},children:[\"Deposits has been disabled until a Profile Photo is uploaded.\",\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Note: This will be match with your Valid Means of ID Uploaded\"]}),/*#__PURE__*/_jsxs(\"section\",{style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"section\",{className:\"row wallet__address\",style:{marginBottom:0},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Loan Amount\",className:\"wallet__label label-name\",children:/*#__PURE__*/_jsx(\"span\",{className:\"\",children:\"Wallet Address\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"\",children:textToCopy})]}),/*#__PURE__*/_jsx(FileCopyIcon,{onClick:copyToClipboard,style:{cursor:\"pointer\",marginLeft:7}})]}),copied&&/*#__PURE__*/_jsx(\"p\",{className:\"sub-title\",style:{marginLeft:\"26%\",paddingTop:7},children:\"Wallet Address Copied\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"row m-t-xxl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"page-form\",autoComplete:\"off\",name:\"amount\"// onChange={handleInputChangeNewDeposit}\n,onChange:function onChange(e){return convertAmount(e);},value:parseInt(amount),pattern:\"[+-]?\\\\d+(?:[.,]\\\\d+)?\",placeholder:numberFormat(50000)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Loan Amount\",className:\"label-name\",children:/*#__PURE__*/_jsx(\"span\",{className:\"content-name\",children:\"Amount Deposited\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(FormControl,{variant:\"standard\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"\",className:\"label-name-select\",children:\"Upload Proof of payment\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"page-form file\",autoComplete:\"off\",placeholder:\" \",name:\"proof_of_payment\"// onChange={handleInputChangeNewDeposit}\n,onChange:function onChange(e){return setProofOfPayment(e.target.value);},value:proof_of_payment})]})})]}),!btnDisabled&&/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary pull-right\",children:\"Confirm my deposit\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary pull-right\",onClick:handleFormClose,children:[\" \",\"close\",\" \"]})]})]})}),/*#__PURE__*/_jsx(Modal,{open:newDWithdrawalModal,onClose:handleWithdrawalFormClose,\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:/*#__PURE__*/_jsxs(Box,{sx:style,children:[/*#__PURE__*/_jsxs(Typography,{id:\"modal-modal-title\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title t-xl title-case\",children:[\" \",\"Make a Withdrawal\",\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sub-title\",children:\"You shall receive the equalivalent into the BitCoin Address below within 24hours\"}),/*#__PURE__*/_jsx(ErrorOutlineIcon,{})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"loan-form p-lg\",onSubmit:handleWithdrawal,children:[/*#__PURE__*/_jsxs(\"section\",{className:\"row wallet__address\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Loan Amount\",className:\"wallet__label label-name\",children:/*#__PURE__*/_jsx(\"span\",{className:\"\",children:\"Your Wallet Address\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"ml-20\",children:\"bc1qh25jnm4h6fqdmh0qxd8c8cmlqpxgdhtsaw5jgj\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"row m-t-xxl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"page-form\",autoComplete:\"off\",name:\"amount_to_withdraw\"// onChange={handleInputChangeNewDeposit}\n,onChange:function onChange(e){return convertAmountToWithdraw(e);},value:parseInt(amount_to_withdraw),pattern:\"[+-]?\\\\d+(?:[.,]\\\\d+)?\"// placeholder={numberFormat(50000)}\n}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Loan Amount\",className:\"label-name\",children:/*#__PURE__*/_jsx(\"span\",{className:\"content-name\",children:\" Amount to Withdraw\"})})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary pull-right\",children:\"Initiate Withdrawal\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary pull-right\",onClick:handleWithdrawalFormClose,children:[\" \",\"Cancel\",\" \"]})]})]})}),/*#__PURE__*/_jsx(Modal,{open:openInvestmentToUpdate,onClose:handleClose,\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:/*#__PURE__*/_jsxs(Box,{sx:style,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(Typography,{id:\"modal-modal-title\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"summary__title t-xl upper-case\",children:\" \"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info plr-20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label f-man\",children:\" Investment \"}),/*#__PURE__*/_jsx(\"h4\",{className:\"summary__title title-case request\",children:numberFormat(investment===null||investment===void 0?void 0:investment.amount)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"b-b\"}),/*#__PURE__*/_jsx(\"section\",{className:\"row f-man jus-sp-around\",children:/*#__PURE__*/_jsx(\"div\",{className:\"summary__center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info plr-20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label title-case\",children:\"Reference\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title upper-case\",children:[\" \",investment===null||investment===void 0?void 0:investment.ref_no]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info plr-20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label title-case\",children:\"Package/Plan\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title\",children:[\" \",investment.plan]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info plr-20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label\",children:\"Investment Date\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"summary__title\",children:moment(investment===null||investment===void 0?void 0:investment.created_at).format(\"ll\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info plr-20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label\",children:\" Take Home \"}),/*#__PURE__*/_jsx(\"h4\",{className:\"summary__title title-case\",children:numberFormat((investment===null||investment===void 0?void 0:investment.amount)*((investment===null||investment===void 0?void 0:investment.interest)/100)+(investment===null||investment===void 0?void 0:investment.amount))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info plr-20\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"summary__label\",children:\" Status\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title title-case\",children:[\" \",investment.status]})]})]})})}),superAdmin&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn bg__green pull-right\",onClick:function onClick(){return updateInvestmentStatus(investment.id,\"approved\");},name:\"approved\",value:\"approved\",children:[\" \",\"Approve\",\" \"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn bg__red pull-right\",name:\"declined\",value:\"declined\",onClick:function onClick(){return updateInvestmentStatus(investment.id,\"declined\");},children:[\" \",\"Decline\",\" \"]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleUpdateInvestmentFormClose,className:\"btn btn-secondary pull-right\",children:[\" \",\"cancel\",\" \"]})]})}),/*#__PURE__*/_jsx(Modal,{open:uploadPhoto,onClose:handleAvataModalClose,\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:/*#__PURE__*/_jsxs(Box,{sx:style,children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsx(Typography,{id:\"modal-modal-title\",children:/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title t-xl title-case\",children:[\" \",\"Update Profile Photo\",\" \"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"b-b\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"row f-man jus-sp-around\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary__center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"header__info\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(FormControl,{variant:\"standard\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"\",className:\"label-name-select\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"page-form file\",autoComplete:\"off\",placeholder:\" \",onChange:function onChange(e){return setNewAvatar(e.target.files[0]);},name:\"file\"})]})})})}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return FileUploader(\"\".concat(BASE_URL,\"/user/\").concat(id,\"/image\"),\"profile_pic\",newAvatar,\"Avatar\",fetchUserDetails);},className:\"btn btn-primary pull-right\",children:[\" \",\"Upload\",\" \"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAvataModalClose,className:\"btn btn-secondary pull-right\",children:[\" \",\"CLOSE\",\" \"]})]})]})}),/*#__PURE__*/_jsx(Modal,{open:uploadDoc,onClose:handleDocumentModalClose,\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:/*#__PURE__*/_jsxs(Box,{sx:style,children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsx(Typography,{id:\"modal-modal-title\",children:/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title t-xl title-case\",children:[\" \",\"Upload a valid means ID (National ID, Drivers Licence, Voters Card or work ID)\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"b-b\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"row f-man jus-sp-around\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary__center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"header__info\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(FormControl,{variant:\"standard\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"\",className:\"label-name-select\",children:\"Upload Here\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"page-form file\",autoComplete:\"off\",placeholder:\" \",onChange:function onChange(e){return setNewDocument(e.target.files[0]);},name:\"file\"})]})})})}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return FileUploader(\"\".concat(BASE_URL,\"/user/\").concat(id,\"/document\"),\"document\",newDocument,\"Document\",fetchUserDetails);},className:\"btn btn-primary pull-right\",children:[\" \",\"Upload\",\" \"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleDocumentModalClose,className:\"btn btn-secondary pull-right\",children:[\" \",\"cancel\",\" \"]})]})]})})]});}export default InvestorDetails;","map":{"version":3,"sources":["/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/src/Components/Pages/InvestorDetails.js"],"names":["React","useState","useEffect","useRef","Typography","Modal","CreditScoreIcon","CurrencyExchangeIcon","Box","moment","API","FileCopyIcon","AddIcon","ErrorOutlineIcon","Avatar","IconButton","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","FileUploader","DownloadFile","AddCardIcon","AssignmentIcon","axios","useHistory","useLoading","Oval","format","numberFormat","BASE_URL","useParams","useLocation","FormControl","InputLabel","CLoadingButton","ToastContainer","toast","style","position","top","left","transform","width","bgcolor","boxShadow","p","InvestorDetails","payLoan","amount_to_remit","loanStatusx","status","max_duration","plan","interest","maturity_date","add","id","user","setUser","totalInvestment","setTotalInvestment","TakeLoanBtn","setTakeLoanBtn","toaster","setToaster","loader","setLoader","loanHistory","setLoanHistory","payments","setPayments","textToCopy","setTextToCopy","btnDisabled","setBtnDisabled","copied","setCopied","open","setOpen","superAdmin","setSuperAdmin","handleClose","newDepositModal","setNewDepositModal","openInvestmentToUpdate","setOpenInvestmentToUpdate","uploadPhoto","setUploadPhoto","uploadDoc","setUploadDoc","handleAvataModalClose","handleDocumentModalClose","newAvatar","setNewAvatar","newDocument","setNewDocument","newDWithdrawalModal","setWithdrawalModal","handleWithdrawalFormClose","handleFormClose","handleUpdateInvestmentFormClose","paidBack","setPaidBack","loanId","setLoanId","loanToUpdate","setLoanToUpdate","allInvestments","setAllInvestments","investment","setInvestment","parseInt","amount","setAmount","amount_to_withdraw","setAmountToWithdraw","proof_of_payment","setProofOfPayment","investmentToUpdate","setInvestmentToUpdate","loading","indicator","loaderProps","valueText","indicatorEl","history","fetchUserDetails","getUserInfo","convertAmount","e","target","value","userInfo","localStorage","getItem","JSON","parse","console","log","data","role","convertAmountToWithdraw","copyToClipboard","navigator","clipboard","writeText","then","setTimeout","catch","err","error","updateInvestmentStatus","investmentId","val","put","response","success","message","handleUpdateStatusFormOpen","handleNewDepositSubmit","preventDefault","post","handleWithdrawal","handleOpen","loan","handleNewFormOpen","handleNewWithdrawalFormOpen","formatCurrency","Intl","NumberFormat","currency","maximumFractionDigits","determineInvestorPlan","amountToInvest","get","results","profile_pic","investments","tot","reduce","total","currentValue","capitalizeFirstLetter","string","charAt","toUpperCase","slice","getLoanHistories","user_id","sort","a","b","created_at","split","reverse","join","localeCompare","length","prevRecord","map","histories","res","borderRadius","color","first_name","last_name","email","phone_1","country","wallet_type","Date","borderBottom","ref_no","marginBottom","display","alignItems","cursor","marginLeft","paddingTop","files"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Typography from \"@mui/material/Typography\";\nimport Modal from \"@mui/material/Modal\";\nimport CreditScoreIcon from \"@mui/icons-material/CreditScore\";\nimport CurrencyExchangeIcon from \"@mui/icons-material/CurrencyExchange\";\nimport Box from \"@mui/material/Box\";\nimport moment from \"moment\";\nimport API from \"../../Util/API\";\nimport FileCopyIcon from \"@mui/icons-material/FileCopy\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport ErrorOutlineIcon from \"@mui/icons-material/ErrorOutline\";\nimport { Avatar, IconButton } from \"@material-ui/core\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Paper from \"@mui/material/Paper\";\nimport { FileUploader, DownloadFile } from \"../../Util/FileUploader\";\nimport AddCardIcon from \"@mui/icons-material/AddCard\";\nimport AssignmentIcon from \"@mui/icons-material/Assignment\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { useLoading, Oval } from \"@agney/react-loading\";\nimport { format } from \"date-fns\";\nimport numberFormat from \"../../Util/CurrencyFormatter\";\nimport BASE_URL from \"../../Util/API\";\nimport { useParams, useLocation } from \"react-router-dom\";\nimport FormControl from \"@mui/material/FormControl\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport { CLoadingButton } from \"@coreui/react-pro\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"./Pages.scss\";\n\n// import {FileUploader, DownloadFile} from \"../../Util/FileUploader\";\n\nconst style = {\n  position: \"absolute\",\n  top: \"50%\",\n  left: \"50%\",\n  transform: \"translate(-50%, -50%)\",\n  width: 800,\n  bgcolor: \"background.paper\",\n  boxShadow: 24,\n  p: 4,\n};\n\nfunction InvestorDetails() {\n  const payLoan = {\n    amount_to_remit: 0,\n  };\n\n  const loanStatusx = {\n    status: \"\",\n  };\n  // const getStartDate=()=>{\n  //   return ;\n  // }\n  const max_duration = 14;\n  const plan = \"Delux\";\n  const interest = 30;\n  const maturity_date = moment().add(14, \"days\").format(\"MM-DD-YYYY\");\n\n  const { id } = useParams();\n  // const location = useLocation();\n  const [user, setUser] = useState({});\n  const [totalInvestment, setTotalInvestment] = useState();\n  const [TakeLoanBtn, setTakeLoanBtn] = useState(false);\n  const [toaster, setToaster] = useState(false);\n  const [loader, setLoader] = useState(false);\n  const [loanHistory, setLoanHistory] = useState([]);\n  const [payments, setPayments] = useState([]);\n  const [textToCopy, setTextToCopy] = useState(\n    \"bc1qh25jnm4h6fqdmh0qxd8c8cmlqpxgdhtsaw5jgj\"\n  );\n  const [btnDisabled, setBtnDisabled] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const [open, setOpen] = useState(false);\n  const [superAdmin, setSuperAdmin] = useState(false);\n  const handleClose = () => setOpen(false);\n  const [newDepositModal, setNewDepositModal] = useState(false);\n  const [openInvestmentToUpdate, setOpenInvestmentToUpdate] = useState(false);\n  const [uploadPhoto, setUploadPhoto] = useState(false);\n  const [uploadDoc, setUploadDoc] = useState(false);\n  const handleAvataModalClose = () => setUploadPhoto(false);\n  const handleDocumentModalClose = () => setUploadDoc(false);\n  const [newAvatar, setNewAvatar] = useState();\n  const [newDocument, setNewDocument] = useState();\n  const [newDWithdrawalModal, setWithdrawalModal] = useState(false);\n  const handleWithdrawalFormClose = () => setWithdrawalModal(false);\n  const handleFormClose = () => setNewDepositModal(false);\n  const handleUpdateInvestmentFormClose = () =>\n    setOpenInvestmentToUpdate(false);\n  // const [newInvestment, setNewInvestment] = useState(investmentDetails);\n  // const handleFormClose = () => setNewLoanModal(false);\n  const [paidBack, setPaidBack] = useState(0);\n  const [loanId, setLoanId] = useState();\n  const [loanToUpdate, setLoanToUpdate] = useState({});\n  const [allInvestments, setAllInvestments] = useState([]);\n  const [investment, setInvestment] = useState({});\n  const [amount, setAmount] = useState(parseInt(0));\n  const [amount_to_withdraw, setAmountToWithdraw] = useState(parseInt(0));\n  const [proof_of_payment, setProofOfPayment] = useState(\"\");\n  const [investmentToUpdate, setInvestmentToUpdate] = useState({});\n\n  const { indicatorEl } = useLoading({\n    loading: true,\n    indicator: <Oval width=\"50\" />,\n    loaderProps: {\n      valueText: \"Please wait, loading records\",\n      style: { position: \"absolute\", left: \"50%\", top: \"50%\" },\n    },\n  });\n\n  const history = useHistory();\n  useEffect(() => {\n    fetchUserDetails();\n    getUserInfo();\n  }, []);\n\n  const convertAmount = (e) => {\n    setAmount(parseInt(e.target.value));\n  };\n\n  const getUserInfo = () => {\n    const userInfo = localStorage.getItem(\"userInfo\");\n\n    const user = JSON.parse(userInfo);\n    console.log(user);\n    if (user.data.role === \"admin\") setSuperAdmin(true);\n  };\n\n  const convertAmountToWithdraw = (e) => {\n    setAmountToWithdraw(parseInt(e.target.value));\n  };\n\n  const copyToClipboard = () => {\n    navigator.clipboard\n      .writeText(textToCopy)\n      .then(() => {\n        setCopied(true);\n        console.log(textToCopy);\n        setTimeout(() => {\n          setCopied(false);\n        }, 2000); // Display 'Copied!' message for 2 seconds\n      })\n      .catch((err) => {\n        console.error(\"Failed to copy: \", err);\n      });\n  };\n\n  const updateInvestmentStatus = (investmentId, val) => {\n    console.log(investmentId, val);\n    axios\n      .put(`${BASE_URL}/investment/${investmentId}`, { status: val })\n      .then((response) => {\n        console.log(response);\n        toast.success(response.data.message);\n        fetchUserDetails();\n        handleFormClose();\n      })\n      .catch((error) => {\n        console.log(error);\n        toast.error(error.message);\n      });\n    console.log(investment);\n    setInvestmentToUpdate(investment);\n  };\n\n  const handleUpdateStatusFormOpen = (investment) => {\n    console.log(investment);\n    setOpenInvestmentToUpdate(true);\n    setInvestment(investment);\n  };\n\n  const handleNewDepositSubmit = (e) => {\n    e.preventDefault();\n    console.log(typeof amount);\n    axios\n      .post(`${BASE_URL}/investment/${id}`, {\n        plan,\n        maturity_date,\n        interest,\n        amount,\n        proof_of_payment,\n      })\n      .then((response) => {\n        console.log(response);\n        toast.success(response.data.message);\n        fetchUserDetails();\n        handleFormClose();\n      })\n      .catch((error) => {\n        console.log(error);\n        toast.error(error.message);\n      });\n  };\n\n  const handleWithdrawal = (e) => {\n    e.preventDefault();\n    console.log(investment);\n    // if(amount_to_withdraw > amount_invested){\n    //   toast.error(\"You cant withdraw above \"+ amount_invested )\n    //   return false\n    // }\n    axios\n      .post(`${BASE_URL}/investment/${id}/withdrawal/${investment.id}`, {\n        amount_to_withdraw,\n      })\n      .then((response) => {\n        console.log(response);\n        toast.success(response.data.message);\n        fetchUserDetails();\n        handleFormClose();\n      })\n      .catch((error) => {\n        console.log(error);\n        toast.error(error.message);\n      });\n  };\n\n  const handleOpen = (loan) => {\n    setLoanToUpdate(loan);\n    setOpen(true);\n  };\n\n  const handleNewFormOpen = (id) => {\n    setNewDepositModal(true);\n  };\n\n  const handleNewWithdrawalFormOpen = (investment) => {\n    console.log(investment);\n    setInvestment(investment);\n    setWithdrawalModal(true);\n  };\n\n  const formatCurrency = (value) =>\n    new Intl.NumberFormat(\"en-GB\", {\n      style: \"currency\",\n      currency: \"NGN\",\n      maximumFractionDigits: 0,\n    }).format(value);\n\n  // Easy(153hrs, 10times),  and Delux(7days, 15times), Mega(14days, 20times) Plan\n  const determineInvestorPlan = (amountToInvest) => {\n    if (amountToInvest <= 500) {\n      return amountToInvest * 10;\n    } else if (amountToInvest <= 800) {\n      return amountToInvest * 15;\n    } else return amountToInvest * 20;\n  };\n\n  const fetchUserDetails = async () => {\n    setLoader(true);\n    await axios.get(`${BASE_URL}/user/${id}`).then((response) => {\n      setUser(response.data.results);\n      if (\n        response.data.results.profile_pic == null ||\n        response.data.results.profile_pic === \"\"\n      ) {\n        console.log(\"profile_pic isnt available\");\n        setBtnDisabled(true);\n      }\n      console.log(response);\n      setAllInvestments(response.data.results.investments);\n\n      let tot = response.data.results?.investments?.reduce(\n        (total, currentValue) => (total = total + currentValue.amount),\n        0\n      );\n      setTotalInvestment(tot);\n      setLoader(false);\n    });\n  };\n\n  const capitalizeFirstLetter = (string) => {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  };\n\n  const getLoanHistories = (user_id) => {\n    axios\n      .get(`${BASE_URL}/user/${user_id}`)\n      .then((response) => {\n        const { data } = response;\n        setAllInvestments(\n          data.results.sort((a, b) =>\n            a.created_at\n              .split(\"-\")\n              .reverse()\n              .join()\n              .localeCompare(b.created_at.split(\"-\").reverse().join())\n          )\n        );\n        setLoanId(data.results[data.results.length - 1].id);\n        // Activate Take new Loan Button Logic\n        if (allInvestments.length > 0) {\n          let prevRecord = data.results[data.results.length - 1];\n          if (\n            prevRecord.status === \"closed\" ||\n            prevRecord.status === \"declined\"\n          ) {\n            setTakeLoanBtn(true);\n          }\n        }\n\n        data.results.map((history) => {\n          // Set the array to loop here\n          setLoanHistory(history?.payments);\n          const histories = history.payments;\n          // totalPaidBack(history.payments);\n          setLoader(false);\n        });\n      })\n      .catch(function (res) {\n        toast.error(res);\n      });\n  };\n\n  return (\n    <div className=\"account__detail\">\n      <section className=\"row m-t-xxl summary b-b mt-55\">\n        <div className=\"summary__left\">\n          <div className=\"header__info\">\n            <div className=\"user-info\">\n              <div className=\"user-avatar\">\n                <Avatar\n                  src={`${BASE_URL}/${user.profile_pic}`}\n                  style={{ borderRadius: 0 }}\n                />\n              </div>\n              <p\n                className=\"summary__label title-case pointer\"\n                style={{ color: btnDisabled ? \"red\" : \"\" }}\n                onClick={() => setUploadPhoto(true)}>\n                Upload Photo\n              </p>\n            </div>\n\n            <div className=\"user-info\">\n              <h4 className=\"summary__title title-case\">\n                {user?.first_name} {user?.last_name}\n              </h4>\n              <p className=\"summary__label lower-case\">{user?.email}</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"summary__center\">\n          <div className=\"header__info\">\n            <div className=\"user-info plr-20\">\n              <p className=\"summary__label\">Primary Contact</p>\n              <h4 className=\"summary__title title-case\"> {user?.phone_1}</h4>\n            </div>\n            <div className=\"user-info plr-20\">\n              <p className=\"summary__label\">Country</p>\n              <h4 className=\"summary__title\">{user?.country}</h4>\n            </div>\n\n            <div className=\"user-info plr-20\">\n              <p className=\"summary__label\">Wallet Type</p>\n              <h4 className=\"summary__title\">\n                {\" \"}\n                {user?.wallet_type ? user?.wallet_type : \"BitCoin\"}\n              </h4>\n            </div>\n            <div className=\"user-info plr-20\">\n              <p className=\"summary__label\">Joined</p>\n              <h4 className=\"summary__title\">\n                {\" \"}\n                {user?.created_at\n                  ? format(new Date(user?.created_at), \"PP\")\n                  : \"N/A\"}\n              </h4>\n            </div>\n          </div>\n        </div>\n        <div className=\"summary__right\">\n          <div className=\"user-info\">\n            <p className=\"summary__label\">Total Invested</p>\n            <h4 className=\"summary__title t-xl\">\n              {\" \"}\n              {numberFormat(totalInvestment)}\n            </h4>\n            {/* <p className=\"summary__label\">24 Dec, 2022</p> */}\n          </div>\n        </div>\n      </section>\n      <div className=\"d-flex\">\n        <h4 className=\"summary__title t-xl m-5em\"> Investment History</h4>\n        <button\n          className=\"btn bg__green pull-right\"\n          name=\"newLoan\"\n          // disabled={btnDisabled}\n          onClick={() => handleNewFormOpen()}>\n          {\" \"}\n          Invest Now!\n        </button>\n      </div>\n      <section className=\"row-m summary al-base\">\n        <div className=\"summary__left w-100\">\n          <div className=\"header__info\">\n            <section className=\"row\">\n              {allInvestments.length == 0 && !loader && (\n                <p className=\"empty__record\">Oops! No Investments yet...</p>\n              )}\n              <TableContainer component={Paper}>\n                <Table aria-label=\"collapsible table\">\n                  <TableHead>\n                    <TableRow>\n                      <TableCell />\n                      <TableCell>Ref</TableCell>\n                      <TableCell>Investment</TableCell>\n                      <TableCell>Package</TableCell>\n                      <TableCell>Growth</TableCell>\n                      <TableCell>duration</TableCell>\n                      <TableCell>Take Home</TableCell>\n                      <TableCell> Date</TableCell>\n                      <TableCell>Maturity Date</TableCell>\n                      <TableCell>Status</TableCell>\n                      <TableCell> Action </TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {allInvestments?.map((investment) => {\n                      return (\n                        <TableRow\n                          sx={{ \"& > *\": { borderBottom: \"unset\" } }}\n                          key={investment?.id}>\n                          <TableCell></TableCell>\n                          <TableCell className=\"upper-case\">\n                            {investment?.ref_no}\n                          </TableCell>\n                          <TableCell>\n                            {numberFormat(investment?.amount)}\n                          </TableCell>\n                          <TableCell>{investment?.plan}</TableCell>\n                          <TableCell>\n                            {numberFormat(\n                              (investment?.interest / 100) * investment.amount\n                            )}\n                          </TableCell>\n                          <TableCell>14 days</TableCell>\n                          <TableCell>\n                            {/* {numberFormat(determineInvestorPlan(investment.amount))} */}\n                            {numberFormat(\n                              (investment?.interest / 100) * investment.amount +\n                                investment.amount\n                            )}\n                          </TableCell>\n                          <TableCell>\n                            {format(new Date(investment?.created_at), \"PP\")}\n                          </TableCell>\n                          <TableCell>\n                            {moment(investment?.created_at)\n                              .add(14, \"days\")\n                              .format(\"ll\")}\n                          </TableCell>\n                          <TableCell\n                            className={\n                              investment?.status === \"pending\" ||\n                              investment?.status === \"declined\"\n                                ? \"red title-case\"\n                                : \"green title-case\"\n                            }>\n                            {investment?.status}\n                          </TableCell>\n                          <TableCell className=\"btn-group\">\n                            {!superAdmin &&\n                              (investment?.status === \"approved\" ||\n                                investment?.status === \"open\") && (\n                                <CurrencyExchangeIcon\n                                  onClick={() =>\n                                    handleNewWithdrawalFormOpen(investment)\n                                  }\n                                />\n                              )}\n                            {superAdmin && investment?.status === \"pending\" && (\n                              <CreditScoreIcon\n                                onClick={() =>\n                                  handleUpdateStatusFormOpen(investment)\n                                }\n                              />\n                            )}\n                          </TableCell>\n                        </TableRow>\n                      );\n                    })}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            </section>\n          </div>\n        </div>\n        {/* <div className=\"other-details w-30\">\n          <div className=\"user-info mb-20\">\n            <p className=\"summary__label\">State of Residence</p>\n            <h4 className=\"summary__title title-case\">\n              {user?.state_of_residence\n                ? user?.state_of_residence\n                : \"N/A\"}\n            </h4>\n          </div>\n          <div className=\"user-info mb-20\">\n          <p className=\"summary__label\">City of Residence</p>\n            <h4 className=\"summary__title title-case\">\n              {user?.city\n                ? user?.city\n                : \"N/A\"}\n            </h4>\n          </div>\n          <div className=\"user-info mb-20\">\n          <p className=\"summary__label\">Alternate Contact</p>\n            <h4 className=\"summary__title title-case\">\n              {user?.phone_2\n                ? user?.phone_2\n                : \"N/A\"}\n            </h4>\n          </div>\n          <div className=\"user-info mb-20\">\n          <p className=\"summary__label\">Wallet Address</p>\n            <h4 className=\"summary__title title-case\">\n              {user?.wallet_info\n                ? user?.wallet_info\n                : \"N/A\"}\n            </h4>\n          </div>\n          \n        </div> */}\n      </section>\n      <Modal\n        open={newDepositModal}\n        onClose={handleFormClose}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\">\n        <Box sx={style}>\n          <Typography id=\"modal-modal-title\">\n            <h4 className=\"summary__title t-xl title-case\"> Make a Deposit </h4>\n            <div className=\"flex\">\n              <ErrorOutlineIcon />\n              <span className=\"sub-title\">\n                Deposit in BitCoin the equivalent you wish to invest into the\n                minning account below\n              </span>\n            </div>\n          </Typography>\n          <form className=\"loan-form p-lg\" onSubmit={handleNewDepositSubmit}>\n            {btnDisabled && (\n              <p\n                className=\"sub-title\"\n                style={{ color: \"red\", marginBottom: 7 }}>\n                Deposits has been disabled until a Profile Photo is uploaded.{\" \"}\n                <br />\n                Note: This will be match with your Valid Means of ID Uploaded\n              </p>\n            )}\n\n            <section style={{ display: \"flex\", alignItems: \"center\" }}>\n              <section\n                className=\"row wallet__address\"\n                style={{ marginBottom: 0 }}>\n                <label\n                  htmlFor=\"Loan Amount\"\n                  className=\"wallet__label label-name\">\n                  <span className=\"\">Wallet Address</span>\n                </label>\n                <p className=\"\">{textToCopy}</p>\n              </section>\n              <FileCopyIcon\n                onClick={copyToClipboard}\n                style={{ cursor: \"pointer\", marginLeft: 7 }}\n              />\n            </section>\n            {copied && (\n              <p\n                className=\"sub-title\"\n                style={{ marginLeft: \"26%\", paddingTop: 7 }}>\n                Wallet Address Copied\n              </p>\n            )}\n            <section className=\"row m-t-xxl\">\n              <div className=\"form\">\n                <input\n                  type=\"number\"\n                  className=\"page-form\"\n                  autoComplete=\"off\"\n                  name=\"amount\"\n                  // onChange={handleInputChangeNewDeposit}\n                  onChange={(e) => convertAmount(e)}\n                  value={parseInt(amount)}\n                  pattern=\"[+-]?\\d+(?:[.,]\\d+)?\"\n                  placeholder={numberFormat(50000)}\n                />\n                <label htmlFor=\"Loan Amount\" className=\"label-name\">\n                  <span className=\"content-name\">Amount Deposited</span>\n                </label>\n              </div>\n              <div className=\"form\">\n                <FormControl variant=\"standard\">\n                  <InputLabel id=\"\" className=\"label-name-select\">\n                    Upload Proof of payment\n                  </InputLabel>\n                  <input\n                    type=\"file\"\n                    className=\"page-form file\"\n                    autoComplete=\"off\"\n                    placeholder=\" \"\n                    name=\"proof_of_payment\"\n                    // onChange={handleInputChangeNewDeposit}\n                    onChange={(e) => setProofOfPayment(e.target.value)}\n                    value={proof_of_payment}\n                  />\n                </FormControl>\n              </div>\n            </section>\n\n            {!btnDisabled && (\n              <button type=\"submit\" className=\"btn btn-primary pull-right\">\n                Confirm my deposit\n              </button>\n            )}\n            <button\n              className=\"btn btn-secondary pull-right\"\n              onClick={handleFormClose}>\n              {\" \"}\n              close{\" \"}\n            </button>\n          </form>\n        </Box>\n      </Modal>\n\n      {/* Withdrawal Modal starts  */}\n\n      <Modal\n        open={newDWithdrawalModal}\n        onClose={handleWithdrawalFormClose}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\">\n        <Box sx={style}>\n          <Typography id=\"modal-modal-title\">\n            <h4 className=\"summary__title t-xl title-case\">\n              {\" \"}\n              Make a Withdrawal{\" \"}\n            </h4>\n            <div className=\"flex\">\n              <span className=\"sub-title\">\n                You shall receive the equalivalent into the BitCoin Address\n                below within 24hours\n              </span>\n              <ErrorOutlineIcon />\n            </div>\n          </Typography>\n          <form className=\"loan-form p-lg\" onSubmit={handleWithdrawal}>\n            <section className=\"row wallet__address\">\n              <label htmlFor=\"Loan Amount\" className=\"wallet__label label-name\">\n                <span className=\"\">Your Wallet Address</span>\n              </label>\n              <p className=\"ml-20\">\n                bc1qh25jnm4h6fqdmh0qxd8c8cmlqpxgdhtsaw5jgj\n              </p>\n            </section>\n            <section className=\"row m-t-xxl\">\n              <div className=\"form\">\n                <input\n                  type=\"number\"\n                  className=\"page-form\"\n                  autoComplete=\"off\"\n                  name=\"amount_to_withdraw\"\n                  // onChange={handleInputChangeNewDeposit}\n                  onChange={(e) => convertAmountToWithdraw(e)}\n                  value={parseInt(amount_to_withdraw)}\n                  pattern=\"[+-]?\\d+(?:[.,]\\d+)?\"\n                  // placeholder={numberFormat(50000)}\n                />\n                <label htmlFor=\"Loan Amount\" className=\"label-name\">\n                  <span className=\"content-name\"> Amount to Withdraw</span>\n                </label>\n              </div>\n            </section>\n\n            <button type=\"submit\" className=\"btn btn-primary pull-right\">\n              Initiate Withdrawal\n            </button>\n            <button\n              className=\"btn btn-secondary pull-right\"\n              onClick={handleWithdrawalFormClose}>\n              {\" \"}\n              Cancel{\" \"}\n            </button>\n          </form>\n        </Box>\n      </Modal>\n\n      {/* Withdrawal Modal ends */}\n\n      {/* Approve/ Acknowledge Receipt of Investment */}\n      {/* {OpenvestmentToUpdate.status === \"pending\" && ( */}\n      <Modal\n        open={openInvestmentToUpdate}\n        onClose={handleClose}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\">\n        <Box sx={style}>\n          <div className=\"d-flex\">\n            <Typography id=\"modal-modal-title\">\n              <h4 className=\"summary__title t-xl upper-case\"> </h4>\n            </Typography>\n            <div className=\"user-info plr-20\">\n              <p className=\"summary__label f-man\"> Investment </p>\n              <h4 className=\"summary__title title-case request\">\n                {numberFormat(investment?.amount)}\n              </h4>\n            </div>\n          </div>\n          <div className=\"b-b\"></div>\n          <section className=\"row f-man jus-sp-around\">\n            <div className=\"summary__center\">\n              <div className=\"header__info\">\n                <div className=\"user-info plr-20\">\n                  <p className=\"summary__label title-case\">Reference</p>\n                  <h4 className=\"summary__title upper-case\">\n                    {\" \"}\n                    {investment?.ref_no}\n                  </h4>\n                </div>\n\n                <div className=\"user-info plr-20\">\n                  <p className=\"summary__label title-case\">Package/Plan</p>\n                  <h4 className=\"summary__title\"> {investment.plan}</h4>\n                </div>\n\n                <div className=\"user-info plr-20\">\n                  <p className=\"summary__label\">Investment Date</p>\n                  <h4 className=\"summary__title\">\n                    {moment(investment?.created_at).format(\"ll\")}\n                  </h4>\n                </div>\n                <div className=\"user-info plr-20\">\n                  <p className=\"summary__label\"> Take Home </p>\n                  <h4 className=\"summary__title title-case\">\n                    {numberFormat(\n                      investment?.amount * (investment?.interest / 100) +\n                        investment?.amount\n                    )}\n                  </h4>\n                </div>\n                <div className=\"user-info plr-20\">\n                  <p className=\"summary__label\"> Status</p>\n                  <h4 className=\"summary__title title-case\">\n                    {\" \"}\n                    {investment.status}\n                  </h4>\n                </div>\n              </div>\n            </div>\n          </section>\n          {superAdmin && (\n            <div>\n              <button\n                type=\"submit\"\n                className=\"btn bg__green pull-right\"\n                onClick={() =>\n                  updateInvestmentStatus(investment.id, \"approved\")\n                }\n                name=\"approved\"\n                value=\"approved\">\n                {\" \"}\n                Approve{\" \"}\n              </button>\n              <button\n                className=\"btn bg__red pull-right\"\n                name=\"declined\"\n                value=\"declined\"\n                onClick={() =>\n                  updateInvestmentStatus(investment.id, \"declined\")\n                }>\n                {\" \"}\n                Decline{\" \"}\n              </button>\n            </div>\n          )}\n          <button\n            onClick={handleUpdateInvestmentFormClose}\n            className=\"btn btn-secondary pull-right\">\n            {\" \"}\n            cancel{\" \"}\n          </button>\n        </Box>\n      </Modal>\n      {/* )} */}\n      {/* Document Upload  Starts*/}\n\n      <Modal\n        open={uploadPhoto}\n        onClose={handleAvataModalClose}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\">\n        <Box sx={style}>\n          <div className=\"d-flex\">\n            <Typography id=\"modal-modal-title\">\n              <h4 className=\"summary__title t-xl title-case\">\n                {\" \"}\n                Update Profile Photo{\" \"}\n              </h4>\n            </Typography>\n          </div>\n          <div className=\"b-b\"></div>\n          <section className=\"row f-man jus-sp-around\">\n            <div className=\"summary__center\">\n              <div className=\"header__info\">\n                <div className=\"form\">\n                  <FormControl variant=\"standard\">\n                    <InputLabel id=\"\" className=\"label-name-select\">\n                      {/* <AddIcon/> */}\n                    </InputLabel>\n                    <input\n                      type=\"file\"\n                      className=\"page-form file\"\n                      autoComplete=\"off\"\n                      placeholder=\" \"\n                      onChange={(e) => setNewAvatar(e.target.files[0])}\n                      name=\"file\"\n                    />\n                  </FormControl>\n                </div>\n              </div>\n            </div>\n            <button\n              onClick={() =>\n                FileUploader(\n                  `${BASE_URL}/user/${id}/image`,\n                  \"profile_pic\",\n                  newAvatar,\n                  \"Avatar\",\n                  fetchUserDetails\n                )\n              }\n              className=\"btn btn-primary pull-right\">\n              {\" \"}\n              Upload{\" \"}\n            </button>\n            <button\n              onClick={handleAvataModalClose}\n              className=\"btn btn-secondary pull-right\">\n              {\" \"}\n              CLOSE{\" \"}\n            </button>\n            {/* </form> */}\n          </section>\n        </Box>\n      </Modal>\n\n      {/* Document Modal */}\n\n      <Modal\n        open={uploadDoc}\n        onClose={handleDocumentModalClose}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\">\n        <Box sx={style}>\n          <div className=\"d-flex\">\n            <Typography id=\"modal-modal-title\">\n              <h4 className=\"summary__title t-xl title-case\">\n                {\" \"}\n                Upload a valid means ID (National ID, Drivers Licence, Voters\n                Card or work ID)\n              </h4>\n            </Typography>\n          </div>\n          <div className=\"b-b\"></div>\n          <section className=\"row f-man jus-sp-around\">\n            <div className=\"summary__center\">\n              <div className=\"header__info\">\n                <div className=\"form\">\n                  <FormControl variant=\"standard\">\n                    <InputLabel id=\"\" className=\"label-name-select\">\n                      Upload Here\n                    </InputLabel>\n                    <input\n                      type=\"file\"\n                      className=\"page-form file\"\n                      autoComplete=\"off\"\n                      placeholder=\" \"\n                      onChange={(e) => setNewDocument(e.target.files[0])}\n                      name=\"file\"\n                    />\n                  </FormControl>\n                </div>\n              </div>\n            </div>\n            <button\n              onClick={() =>\n                FileUploader(\n                  `${BASE_URL}/user/${id}/document`,\n                  \"document\",\n                  newDocument,\n                  \"Document\",\n                  fetchUserDetails\n                )\n              }\n              className=\"btn btn-primary pull-right\">\n              {\" \"}\n              Upload{\" \"}\n            </button>\n            <button\n              onClick={handleDocumentModalClose}\n              className=\"btn btn-secondary pull-right\">\n              {\" \"}\n              cancel{\" \"}\n            </button>\n            {/* </form> */}\n          </section>\n        </Box>\n      </Modal>\n\n      {/* Document Uploads Ends */}\n    </div>\n  );\n}\n\nexport default InvestorDetails;\n"]},"metadata":{},"sourceType":"module"}