{"ast":null,"code":"import _toConsumableArray from\"/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import{useHistory}from\"react-router-dom\";import GraphInfo from\"../widgets/GraphInfo\";import{IconButton}from\"@material-ui/core\";import{Link}from\"react-router-dom\";import AuthContext from\"../../Util/AuthContext\";import numberFormat from\"../../Util/CurrencyFormatter\";import API from\"../../Util/API\";import{parse,format,addMonths,formatDistance,subDays}from\"date-fns\";import axios from\"axios\";import Table from\"@mui/material/Table\";import TableBody from\"@mui/material/TableBody\";import TableCell from\"@mui/material/TableCell\";import TableContainer from\"@mui/material/TableContainer\";import TableHead from\"@mui/material/TableHead\";import TableRow from\"@mui/material/TableRow\";import Paper from\"@mui/material/Paper\";import BASE_URL from\"../../Util/API\";import axiosInstance from\"../../Util/axiosInstance\";import\"./dashboard.css\";import CryptoCarousel from\"../widgets/Carousel\";import CoinsTable from\"../widgets/CoinsTable\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Dashboard(){var _userData$investments,_userData$investments2,_userData$investments3,_userData$withdrawals,_userData$withdrawals2,_userData$investments4,_userData$investments5,_userData$investments6,_userData$investments7;var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),investors=_useState2[0],setInvestors=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),systemUsers=_useState4[0],setSystemUsers=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalNoOfDeposit=_useState6[0],setTotalNoOfDeposit=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalNoOfWithdrawals=_useState8[0],setTotalNoOfWithdrawals=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),topEarners=_useState10[0],setTopEarners=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),users=_useState12[0],setUsers=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),loggedInUser=_useState14[0],setLoggedInUser=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),disbursed=_useState16[0],setDisbursed=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),withdrawals=_useState18[0],setWithdrawals=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),superAdmin=_useState20[0],setSuperAdmin=_useState20[1];var _useState21=useState({}),_useState22=_slicedToArray(_useState21,2),userData=_useState22[0],setUserData=_useState22[1];useEffect(function(){getAllInvestors();getUserInfo();return function(){setInvestors([]);setDisbursed([]);setWithdrawals([]);setSystemUsers([]);setTotalNoOfDeposit(0);setTotalNoOfWithdrawals(0);setTopEarners([]);};},[]);var getAllInvestors=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var tempArr,tempWithdrawal;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:tempArr=[];tempWithdrawal=[];axios.get(\"\".concat(BASE_URL,\"/users\")).then(function(response){// console.log(response.data);\nfilterAdmins(response.data.results);setSystemUsers(response.data.results);response.data.results.map(function(user){user.investments.map(function(investment){tempArr.push(investment);setTotalNoOfDeposit(tempArr.length);var totalDisbursed=tempArr.reduce(function(total,currentValue){return total=total+currentValue.amount;},0);setDisbursed(totalDisbursed);//\n});user.withdrawals.map(function(withdrawal){tempWithdrawal.push(withdrawal);// console.log(tempWithdrawal);\nsetTotalNoOfWithdrawals(tempWithdrawal.length);var totalWithdrawals=tempWithdrawal.reduce(function(total,currentValue){return total=total+currentValue.amount;},0);// console.log(totalWithdrawals);\nsetWithdrawals(totalWithdrawals);});});}).catch(function(error){console.log(error);// toast.error(error.message);\n});case 3:case\"end\":return _context.stop();}}},_callee);}));return function getAllInvestors(){return _ref.apply(this,arguments);};}();var requestForCurrentUserData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"\".concat(BASE_URL,\"/user/\").concat(id)).then(function(response){// console.log(response);\n// Upload a Profile photo to continue\nsetUserData(response.data.results);}).catch(function(error){console.log(error);// toast.error(error.message);\n});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function requestForCurrentUserData(_x){return _ref2.apply(this,arguments);};}();var getUserInfo=function getUserInfo(){var userInfo=localStorage.getItem(\"userInfo\");var user=JSON.parse(userInfo);var base64Url=user.data.accessToken.split(\".\")[1];var base64=base64Url.replace(\"-\",\"+\").replace(\"_\",\"/\");// console.log(JSON.parse(window.atob(base64)));\nsetLoggedInUser(JSON.parse(window.atob(base64)));var userId=JSON.parse(window.atob(base64)).id;requestForCurrentUserData(userId);};var filterAdmins=function filterAdmins(arr){arr.map(function(user){if((user===null||user===void 0?void 0:user.role)===\"user\"){setInvestors(function(investors){return[].concat(_toConsumableArray(investors),[user]);});if(user.investments.length>0){setTopEarners(function(topEarners){return[].concat(_toConsumableArray(topEarners),[user]);});}}return null;});// console.log(investors);\n};// const handleClick = (loggedInUser)=>{\n//     history.push(`/app/account/${loggedInUser}`);\n// }\nvar handleClick=function handleClick(userID){history.push(\"/app/account/\".concat(userID));};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title t-xl title-case\",children:[\" \",\"Hello \",userData.first_name,\"!\",\" \"]}),/*#__PURE__*/_jsx(\"p\",{class:\"text-muted text-14\",children:\"Take a peep on what's happening around your investments\"}),loggedInUser.role===\"user\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{class:\"card__holder p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card__icon\",children:/*#__PURE__*/_jsx(\"span\",{class:\"table-usr-circle berry\",children:\"ND\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"card__desc\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-muted text-14\",children:\"No. of Deposits \"}),/*#__PURE__*/_jsxs(\"h3\",{class:\"text-primal card__value\",children:[userData===null||userData===void 0?void 0:(_userData$investments=userData.investments)===null||_userData$investments===void 0?void 0:_userData$investments.length,\" \"]}),\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card__icon\",children:/*#__PURE__*/_jsx(\"span\",{class:\"table-usr-circle berry\",children:\"TD\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"card__desc\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-muted text-14\",children:\"Total Deposits\"}),/*#__PURE__*/_jsx(\"h3\",{class:\"text-primal card__value\",children:(userData===null||userData===void 0?void 0:(_userData$investments2=userData.investments)===null||_userData$investments2===void 0?void 0:_userData$investments2.length)!==0?numberFormat(userData===null||userData===void 0?void 0:(_userData$investments3=userData.investments)===null||_userData$investments3===void 0?void 0:_userData$investments3.reduce(function(total,currentValue){return total=total+currentValue.amount;},0)):0})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card__icon\",children:/*#__PURE__*/_jsx(\"span\",{class:\"table-usr-circle berry\",children:\"TW\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"card__desc\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-muted text-14\",children:\"Total Withdrawal\"}),/*#__PURE__*/_jsx(\"h3\",{class:\"text-primal card__value\",children:(userData===null||userData===void 0?void 0:(_userData$withdrawals=userData.withdrawals)===null||_userData$withdrawals===void 0?void 0:_userData$withdrawals.length)!==0?numberFormat(userData===null||userData===void 0?void 0:(_userData$withdrawals2=userData.withdrawals)===null||_userData$withdrawals2===void 0?void 0:_userData$withdrawals2.reduce(function(total,currentValue){return total=total+currentValue.amount;},0)):0})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"card\",style:{backgroundColor:\"#00cc99\",color:\"white\"},children:[/*#__PURE__*/_jsx(\"div\",{class:\"card__icon\",children:/*#__PURE__*/_jsx(\"span\",{class:\"table-usr-circle cream\",children:\"TWB\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"card__desc\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-muted text-14\",children:\"Wallet Balance\"}),/*#__PURE__*/_jsx(\"h3\",{class:\"text-primal card__value\",children:((_userData$investments4=userData.investments)===null||_userData$investments4===void 0?void 0:_userData$investments4.length)!==0?numberFormat((_userData$investments5=userData.investments)===null||_userData$investments5===void 0?void 0:_userData$investments5.reduce(function(total,currentValue){return total=total+currentValue.balance;},0)):0}),\" \"]})]})]})}),(loggedInUser===null||loggedInUser===void 0?void 0:loggedInUser.role)===\"admin\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{class:\"card__holder p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card__icon\",children:/*#__PURE__*/_jsx(\"span\",{class:\"table-usr-circle berry\",children:\"TI\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"card__desc\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-muted text-14\",children:\"Total Investors \"}),/*#__PURE__*/_jsxs(\"h3\",{class:\"text-primal card__value\",children:[investors===null||investors===void 0?void 0:investors.length,\" \"]}),\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card__icon\",children:/*#__PURE__*/_jsx(\"span\",{class:\"table-usr-circle berry\",children:\"TD\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"card__desc\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-muted text-14\",children:\"Total Deposits\"}),/*#__PURE__*/_jsxs(\"h3\",{class:\"text-primal card__value\",children:[\" \",totalNoOfDeposit,\" \"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card__icon\",children:/*#__PURE__*/_jsx(\"span\",{class:\"table-usr-circle berry\",children:\"NW\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"card__desc\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-muted text-14\",children:\"No. of Withdrawal\"}),/*#__PURE__*/_jsx(\"h3\",{class:\"text-primal card__value\",children:totalNoOfWithdrawals})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card__icon\",children:/*#__PURE__*/_jsx(\"span\",{class:\"table-usr-circle berry\",children:\"TW\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"card__desc\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-muted text-14\",children:\"Total Withdrawal\"}),/*#__PURE__*/_jsx(\"h3\",{class:\"text-primal card__value\",children:numberFormat(withdrawals)})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"card\",style:{backgroundColor:\"#00cc99\",color:\"white\"},children:[/*#__PURE__*/_jsx(\"div\",{class:\"card__icon\",children:/*#__PURE__*/_jsx(\"span\",{class:\"table-usr-circle cream\",children:\"TD\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"card__desc\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-muted text-14\",children:\"Total Deposits\"}),/*#__PURE__*/_jsxs(\"h3\",{class:\"text-primal card__value\",children:[\" \",numberFormat(disbursed),\" \"]}),\" \"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"graphstat\",children:/*#__PURE__*/_jsx(GraphInfo,{})}),/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title t-xl title-case m-l-4\",children:[\" \",\"This Month Top Earners\",\" \"]}),/*#__PURE__*/_jsx(\"section\",{className:\"row\",children:/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"collapsible table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"S/N\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Investor\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Deposited\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Take Home\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Withdrawn\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Balance\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Status\"})]})}),topEarners.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"no__loans\",children:\"Oops! There are no records yet\"}),/*#__PURE__*/_jsx(TableBody,{children:topEarners===null||topEarners===void 0?void 0:topEarners.map(function(user,index){var _user$investments,_user$investments2,_user$investments3,_user$withdrawals,_user$investments4,_user$investments5,_user$withdrawals2,_user$investments6,_user$investments7,_user$investments8,_user$investments9;return/*#__PURE__*/_jsxs(TableRow,{sx:{\"& > *\":{borderBottom:\"unset\"}},onClick:function onClick(){return handleClick(user===null||user===void 0?void 0:user.id);},children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",className:\"upper-case\",children:index+1}),/*#__PURE__*/_jsxs(TableCell,{children:[user===null||user===void 0?void 0:user.first_name,\" \",user===null||user===void 0?void 0:user.last_name]}),/*#__PURE__*/_jsxs(TableCell,{children:[\" \",numberFormat((_user$investments=user.investments[user.investments.length-1])===null||_user$investments===void 0?void 0:_user$investments.amount)]}),/*#__PURE__*/_jsx(TableCell,{children:numberFormat((user===null||user===void 0?void 0:(_user$investments2=user.investments[user.investments.length-1])===null||_user$investments2===void 0?void 0:_user$investments2.amount)*0.3+((_user$investments3=user.investments[user.investments.length-1])===null||_user$investments3===void 0?void 0:_user$investments3.amount))}),/*#__PURE__*/_jsxs(TableCell,{children:[\" \",user.withdrawals.length!==0?numberFormat((_user$withdrawals=user.withdrawals[user.withdrawals.length-1])===null||_user$withdrawals===void 0?void 0:_user$withdrawals.amount):0,\" \"]}),/*#__PURE__*/_jsx(TableCell,{children:// numberFormat(user?.investments[user.investments.length - 1]?.balance)\nnumberFormat((user===null||user===void 0?void 0:(_user$investments4=user.investments[user.investments.length-1])===null||_user$investments4===void 0?void 0:_user$investments4.amount)*0.3+((_user$investments5=user.investments[user.investments.length-1])===null||_user$investments5===void 0?void 0:_user$investments5.amount)-(user.withdrawals.length!==0?(_user$withdrawals2=user.withdrawals[user.withdrawals.length-1])===null||_user$withdrawals2===void 0?void 0:_user$withdrawals2.amount:0))}),/*#__PURE__*/_jsx(TableCell,{className:((_user$investments6=user.investments[user.investments.length-1])===null||_user$investments6===void 0?void 0:_user$investments6.status)===\"open\"||((_user$investments7=user.investments[user.investments.length-1])===null||_user$investments7===void 0?void 0:_user$investments7.status)===\"pending\"?\"red\":\"green\",children:((_user$investments8=user.investments[user.investments.length-1])===null||_user$investments8===void 0?void 0:_user$investments8.status)==\"pending\"||((_user$investments9=user.investments[user.investments.length-1])===null||_user$investments9===void 0?void 0:_user$investments9.status)===\"open\"?\"Minning\":\"Cashed Out\"})]},index);})})]})})})]}),loggedInUser.role===\"user\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"summary__title t-xl title-case m-l-4\",children:[\" \",\"Your Deposits/Investments\",\" \"]}),/*#__PURE__*/_jsx(\"section\",{className:\"row\",children:/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"collapsible table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"S/N\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Ref\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Deposit\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Plan\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Take Home\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Withdrawn\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Balance\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Date\"}),/*#__PURE__*/_jsx(TableCell,{className:\"rotate\",children:\"Status\"})]})}),(userData===null||userData===void 0?void 0:(_userData$investments6=userData.investments)===null||_userData$investments6===void 0?void 0:_userData$investments6.length)===0&&/*#__PURE__*/_jsx(\"p\",{className:\"no__loans\",children:\"Oops! you've not made any deposits yet!\"}),/*#__PURE__*/_jsx(TableBody,{children:userData===null||userData===void 0?void 0:(_userData$investments7=userData.investments)===null||_userData$investments7===void 0?void 0:_userData$investments7.map(function(investment,index){return/*#__PURE__*/_jsxs(TableRow,{sx:{\"& > *\":{borderBottom:\"unset\"}},onClick:function onClick(){return handleClick(userData.id);},children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",className:\"upper-case\",children:index+1}),/*#__PURE__*/_jsxs(TableCell,{children:[\" \",investment.ref_no]}),/*#__PURE__*/_jsxs(TableCell,{children:[\" \",numberFormat(investment.amount)]}),/*#__PURE__*/_jsxs(TableCell,{children:[\" \",investment.plan]}),/*#__PURE__*/_jsxs(TableCell,{children:[\" \",numberFormat(investment.balance)]}),/*#__PURE__*/_jsxs(TableCell,{children:[\" \",numberFormat(0)]}),/*#__PURE__*/_jsx(TableCell,{children:numberFormat(0)}),/*#__PURE__*/_jsx(TableCell,{children:format(new Date(investment===null||investment===void 0?void 0:investment.created_at),\"PP\")}),/*#__PURE__*/_jsxs(TableCell,{className:investment.status===\"pending\"||investment.status===\"declined\"?\"red title-case\":\"green title-case\",children:[\" \",investment.status]})]},index);})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"float__action launcher-button\",onClick:function onClick(){return handleClick(userData.id);},children:[\"Make a deposit \",/*#__PURE__*/_jsx(IconButton,{children:\" + \"})]})]}),/*#__PURE__*/_jsx(CryptoCarousel,{}),/*#__PURE__*/_jsx(CoinsTable,{})]});}export default Dashboard;","map":{"version":3,"sources":["/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/src/Components/Dashboard/Dashboard.js"],"names":["React","useState","useEffect","useContext","useHistory","GraphInfo","IconButton","Link","AuthContext","numberFormat","API","parse","format","addMonths","formatDistance","subDays","axios","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","BASE_URL","axiosInstance","CryptoCarousel","CoinsTable","Dashboard","history","investors","setInvestors","systemUsers","setSystemUsers","totalNoOfDeposit","setTotalNoOfDeposit","totalNoOfWithdrawals","setTotalNoOfWithdrawals","topEarners","setTopEarners","users","setUsers","loggedInUser","setLoggedInUser","disbursed","setDisbursed","withdrawals","setWithdrawals","superAdmin","setSuperAdmin","userData","setUserData","getAllInvestors","getUserInfo","tempArr","tempWithdrawal","get","then","response","filterAdmins","data","results","map","user","investments","investment","push","length","totalDisbursed","reduce","total","currentValue","amount","withdrawal","totalWithdrawals","catch","error","console","log","requestForCurrentUserData","id","userInfo","localStorage","getItem","JSON","base64Url","accessToken","split","base64","replace","window","atob","userId","arr","role","handleClick","userID","first_name","backgroundColor","color","balance","index","borderBottom","last_name","status","ref_no","plan","Date","created_at"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport GraphInfo from \"../widgets/GraphInfo\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AuthContext from \"../../Util/AuthContext\";\r\nimport numberFormat from \"../../Util/CurrencyFormatter\";\r\nimport API from \"../../Util/API\";\r\nimport { parse, format, addMonths, formatDistance, subDays } from \"date-fns\";\r\nimport axios from \"axios\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableContainer from \"@mui/material/TableContainer\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport BASE_URL from \"../../Util/API\";\r\nimport axiosInstance from \"../../Util/axiosInstance\";\r\n\r\nimport \"./dashboard.css\";\r\nimport CryptoCarousel from \"../widgets/Carousel\";\r\nimport CoinsTable from \"../widgets/CoinsTable\";\r\n\r\nfunction Dashboard() {\r\n  const history = useHistory();\r\n\r\n  const [investors, setInvestors] = useState([]);\r\n  const [systemUsers, setSystemUsers] = useState([]);\r\n  const [totalNoOfDeposit, setTotalNoOfDeposit] = useState(0);\r\n  const [totalNoOfWithdrawals, setTotalNoOfWithdrawals] = useState(0);\r\n  const [topEarners, setTopEarners] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [loggedInUser, setLoggedInUser] = useState(\"\");\r\n  const [disbursed, setDisbursed] = useState([]);\r\n  const [withdrawals, setWithdrawals] = useState([]);\r\n  const [superAdmin, setSuperAdmin] = useState(false);\r\n  const [userData, setUserData] = useState({});\r\n\r\n  useEffect(() => {\r\n    getAllInvestors();\r\n    getUserInfo();\r\n    return () => {\r\n      setInvestors([]);\r\n      setDisbursed([]);\r\n      setWithdrawals([]);\r\n      setSystemUsers([]);\r\n      setTotalNoOfDeposit(0);\r\n      setTotalNoOfWithdrawals(0);\r\n      setTopEarners([]);\r\n    };\r\n  }, []);\r\n\r\n  const getAllInvestors = async () => {\r\n    let tempArr = [];\r\n    let tempWithdrawal = [];\r\n    axios\r\n      .get(`${BASE_URL}/users`)\r\n      .then((response) => {\r\n        // console.log(response.data);\r\n        filterAdmins(response.data.results);\r\n        setSystemUsers(response.data.results);\r\n        response.data.results.map((user) => {\r\n          user.investments.map((investment) => {\r\n            tempArr.push(investment);\r\n            setTotalNoOfDeposit(tempArr.length);\r\n            let totalDisbursed = tempArr.reduce(\r\n              (total, currentValue) => (total = total + currentValue.amount),\r\n              0\r\n            );\r\n\r\n            setDisbursed(totalDisbursed);\r\n            //\r\n          });\r\n          user.withdrawals.map((withdrawal) => {\r\n            tempWithdrawal.push(withdrawal);\r\n            // console.log(tempWithdrawal);\r\n            setTotalNoOfWithdrawals(tempWithdrawal.length);\r\n            let totalWithdrawals = tempWithdrawal.reduce(\r\n              (total, currentValue) => (total = total + currentValue.amount),\r\n              0\r\n            );\r\n            // console.log(totalWithdrawals);\r\n            setWithdrawals(totalWithdrawals);\r\n          });\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        // toast.error(error.message);\r\n      });\r\n  };\r\n\r\n  const requestForCurrentUserData = async (id) => {\r\n    await axios\r\n      .get(`${BASE_URL}/user/${id}`)\r\n      .then((response) => {\r\n        // console.log(response);\r\n        // Upload a Profile photo to continue\r\n        setUserData(response.data.results);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        // toast.error(error.message);\r\n      });\r\n  };\r\n\r\n  const getUserInfo = () => {\r\n    const userInfo = localStorage.getItem(\"userInfo\");\r\n    const user = JSON.parse(userInfo);\r\n    const base64Url = user.data.accessToken.split(\".\")[1];\r\n    const base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\r\n    // console.log(JSON.parse(window.atob(base64)));\r\n    setLoggedInUser(JSON.parse(window.atob(base64)));\r\n    let userId = JSON.parse(window.atob(base64)).id;\r\n    requestForCurrentUserData(userId);\r\n  };\r\n\r\n  const filterAdmins = (arr) => {\r\n    arr.map((user) => {\r\n      if (user?.role === \"user\") {\r\n        setInvestors((investors) => [...investors, user]);\r\n        if (user.investments.length > 0) {\r\n          setTopEarners((topEarners) => [...topEarners, user]);\r\n        }\r\n      }\r\n      return null;\r\n    });\r\n    // console.log(investors);\r\n  };\r\n\r\n  // const handleClick = (loggedInUser)=>{\r\n  //     history.push(`/app/account/${loggedInUser}`);\r\n  // }\r\n  const handleClick = (userID) => {\r\n    history.push(`/app/account/${userID}`);\r\n  };\r\n  return (\r\n    <div className=\"main-content\">\r\n      <h4 className=\"summary__title t-xl title-case\">\r\n        {\" \"}\r\n        Hello {userData.first_name}!{\" \"}\r\n      </h4>\r\n      <p class=\"text-muted text-14\">\r\n        Take a peep on what's happening around your investments\r\n      </p>\r\n\r\n      {loggedInUser.role === \"user\" && (\r\n        <>\r\n          {/* <button type=\"submit\" className=\"btn ml-0\" >New Deposit</button> */}\r\n          <section class=\"card__holder p-4\">\r\n            <div class=\"card\">\r\n              <div class=\"card__icon\">\r\n                <span class=\"table-usr-circle berry\">ND</span>\r\n              </div>\r\n              <div class=\"card__desc\">\r\n                <p class=\"text-muted text-14\">No. of Deposits </p>\r\n                <h3 class=\"text-primal card__value\">\r\n                  {userData?.investments?.length}{\" \"}\r\n                </h3>{\" \"}\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"card\">\r\n              <div class=\"card__icon\">\r\n                <span class=\"table-usr-circle berry\">TD</span>\r\n              </div>\r\n              <div class=\"card__desc\">\r\n                <p class=\"text-muted text-14\">Total Deposits</p>\r\n                <h3 class=\"text-primal card__value\">\r\n                  {userData?.investments?.length !== 0\r\n                    ? numberFormat(\r\n                        userData?.investments?.reduce(\r\n                          (total, currentValue) =>\r\n                            (total = total + currentValue.amount),\r\n                          0\r\n                        )\r\n                      )\r\n                    : 0}\r\n                </h3>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"card\">\r\n              <div class=\"card__icon\">\r\n                <span class=\"table-usr-circle berry\">TW</span>\r\n              </div>\r\n              <div class=\"card__desc\">\r\n                <p class=\"text-muted text-14\">Total Withdrawal</p>\r\n                <h3 class=\"text-primal card__value\">\r\n                  {userData?.withdrawals?.length !== 0\r\n                    ? numberFormat(\r\n                        userData?.withdrawals?.reduce(\r\n                          (total, currentValue) =>\r\n                            (total = total + currentValue.amount),\r\n                          0\r\n                        )\r\n                      )\r\n                    : 0}\r\n                </h3>\r\n              </div>\r\n            </div>\r\n\r\n            <div\r\n              class=\"card\"\r\n              style={{ backgroundColor: \"#00cc99\", color: \"white\" }}>\r\n              <div class=\"card__icon\">\r\n                <span class=\"table-usr-circle cream\">TWB</span>\r\n              </div>\r\n              <div class=\"card__desc\">\r\n                <p class=\"text-muted text-14\">Wallet Balance</p>\r\n                <h3 class=\"text-primal card__value\">\r\n                  {userData.investments?.length !== 0\r\n                    ? numberFormat(\r\n                        userData.investments?.reduce(\r\n                          (total, currentValue) =>\r\n                            (total = total + currentValue.balance),\r\n                          0\r\n                        )\r\n                      )\r\n                    : 0}\r\n                </h3>{\" \"}\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </>\r\n      )}\r\n\r\n      {loggedInUser?.role === \"admin\" && (\r\n        <>\r\n          <section class=\"card__holder p-4\">\r\n            <div class=\"card\">\r\n              <div class=\"card__icon\">\r\n                <span class=\"table-usr-circle berry\">TI</span>\r\n              </div>\r\n              <div class=\"card__desc\">\r\n                <p class=\"text-muted text-14\">Total Investors </p>\r\n                <h3 class=\"text-primal card__value\">\r\n                  {investors?.length}{\" \"}\r\n                </h3>{\" \"}\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"card\">\r\n              <div class=\"card__icon\">\r\n                <span class=\"table-usr-circle berry\">TD</span>\r\n              </div>\r\n              <div class=\"card__desc\">\r\n                <p class=\"text-muted text-14\">Total Deposits</p>\r\n                <h3 class=\"text-primal card__value\"> {totalNoOfDeposit} </h3>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"card\">\r\n              <div class=\"card__icon\">\r\n                <span class=\"table-usr-circle berry\">NW</span>\r\n              </div>\r\n              <div class=\"card__desc\">\r\n                <p class=\"text-muted text-14\">No. of Withdrawal</p>\r\n                <h3 class=\"text-primal card__value\">{totalNoOfWithdrawals}</h3>\r\n              </div>\r\n            </div>\r\n            <div class=\"card\">\r\n              <div class=\"card__icon\">\r\n                <span class=\"table-usr-circle berry\">TW</span>\r\n              </div>\r\n              <div class=\"card__desc\">\r\n                <p class=\"text-muted text-14\">Total Withdrawal</p>\r\n                <h3 class=\"text-primal card__value\">\r\n                  {numberFormat(withdrawals)}\r\n                </h3>\r\n              </div>\r\n            </div>\r\n\r\n            <div\r\n              class=\"card\"\r\n              style={{ backgroundColor: \"#00cc99\", color: \"white\" }}>\r\n              <div class=\"card__icon\">\r\n                <span class=\"table-usr-circle cream\">TD</span>\r\n              </div>\r\n              <div class=\"card__desc\">\r\n                <p class=\"text-muted text-14\">Total Deposits</p>\r\n                <h3 class=\"text-primal card__value\">\r\n                  {\" \"}\r\n                  {numberFormat(disbursed)}{\" \"}\r\n                </h3>{\" \"}\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <div className=\"graphstat\">\r\n            <GraphInfo />\r\n          </div>\r\n\r\n          <h4 className=\"summary__title t-xl title-case m-l-4\">\r\n            {\" \"}\r\n            This Month Top Earners{\" \"}\r\n          </h4>\r\n          <section className=\"row\">\r\n            <TableContainer component={Paper}>\r\n              <Table aria-label=\"collapsible table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell />\r\n                    <TableCell className=\"rotate\">S/N</TableCell>\r\n                    <TableCell className=\"rotate\">Investor</TableCell>\r\n                    <TableCell className=\"rotate\">Deposited</TableCell>\r\n                    <TableCell className=\"rotate\">Take Home</TableCell>\r\n                    <TableCell className=\"rotate\">Withdrawn</TableCell>\r\n                    <TableCell className=\"rotate\">Balance</TableCell>\r\n                    <TableCell className=\"rotate\">Status</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                {/* {loader && <div className=\"\"> {indicatorEl} </div>} */}\r\n                {topEarners.length === 0 && (\r\n                  <p className=\"no__loans\">Oops! There are no records yet</p>\r\n                )}\r\n                <TableBody>\r\n                  {topEarners?.map((user, index) => {\r\n                    return (\r\n                      <TableRow\r\n                        sx={{ \"& > *\": { borderBottom: \"unset\" } }}\r\n                        onClick={() => handleClick(user?.id)}\r\n                        key={index}>\r\n                        <TableCell></TableCell>\r\n                        <TableCell\r\n                          component=\"th\"\r\n                          scope=\"row\"\r\n                          className=\"upper-case\">\r\n                          {index + 1}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {user?.first_name} {user?.last_name}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {\" \"}\r\n                          {numberFormat(\r\n                            user.investments[user.investments.length - 1]\r\n                              ?.amount\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {numberFormat(\r\n                            user?.investments[user.investments.length - 1]\r\n                              ?.amount *\r\n                              0.3 +\r\n                              user.investments[user.investments.length - 1]\r\n                                ?.amount\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {\" \"}\r\n                          {user.withdrawals.length !== 0\r\n                            ? numberFormat(\r\n                                user.withdrawals[user.withdrawals.length - 1]\r\n                                  ?.amount\r\n                              )\r\n                            : 0}{\" \"}\r\n                        </TableCell>\r\n                        {/* <TableCell>{numberFormat(((user?.investments[user.investments.length - 1]?.amount * 0.3) + user.investments[user.investments.length - 1]?.amount)) - 0}</TableCell> */}\r\n                        <TableCell>\r\n                          {\r\n                            // numberFormat(user?.investments[user.investments.length - 1]?.balance)\r\n                            numberFormat(\r\n                              user?.investments[user.investments.length - 1]\r\n                                ?.amount *\r\n                                0.3 +\r\n                                user.investments[user.investments.length - 1]\r\n                                  ?.amount -\r\n                                (user.withdrawals.length !== 0\r\n                                  ? user.withdrawals[\r\n                                      user.withdrawals.length - 1\r\n                                    ]?.amount\r\n                                  : 0)\r\n                            )\r\n                          }\r\n                        </TableCell>\r\n                        {/* <TableCell>{user.investments[user.investments.length - 1]?.created_at ? addMonths(new Date(user.investments[user.investments.length - 1]?.created_at), 6).toString() : 'N/A'} </TableCell> */}\r\n                        <TableCell\r\n                          className={\r\n                            user.investments[user.investments.length - 1]\r\n                              ?.status === \"open\" ||\r\n                            user.investments[user.investments.length - 1]\r\n                              ?.status === \"pending\"\r\n                              ? \"red\"\r\n                              : \"green\"\r\n                          }>\r\n                          {user.investments[user.investments.length - 1]\r\n                            ?.status == \"pending\" ||\r\n                          user.investments[user.investments.length - 1]\r\n                            ?.status === \"open\"\r\n                            ? \"Minning\"\r\n                            : \"Cashed Out\"}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </section>\r\n        </>\r\n      )}\r\n\r\n      {/* Current User Data */}\r\n      {loggedInUser.role === \"user\" && (\r\n        <>\r\n          <h4 className=\"summary__title t-xl title-case m-l-4\">\r\n            {\" \"}\r\n            Your Deposits/Investments{\" \"}\r\n          </h4>\r\n          <section className=\"row\">\r\n            <TableContainer component={Paper}>\r\n              <Table aria-label=\"collapsible table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell />\r\n                    <TableCell className=\"rotate\">S/N</TableCell>\r\n                    <TableCell className=\"rotate\">Ref</TableCell>\r\n                    <TableCell className=\"rotate\">Deposit</TableCell>\r\n                    <TableCell className=\"rotate\">Plan</TableCell>\r\n                    <TableCell className=\"rotate\">Take Home</TableCell>\r\n                    <TableCell className=\"rotate\">Withdrawn</TableCell>\r\n                    <TableCell className=\"rotate\">Balance</TableCell>\r\n                    <TableCell className=\"rotate\">Date</TableCell>\r\n                    <TableCell className=\"rotate\">Status</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                {/* {loader && <div className=\"\"> {indicatorEl} </div>} */}\r\n                {userData?.investments?.length === 0 && (\r\n                  <p className=\"no__loans\">\r\n                    Oops! you've not made any deposits yet!\r\n                  </p>\r\n                )}\r\n                <TableBody>\r\n                  {userData?.investments?.map((investment, index) => {\r\n                    return (\r\n                      <TableRow\r\n                        sx={{ \"& > *\": { borderBottom: \"unset\" } }}\r\n                        onClick={() => handleClick(userData.id)}\r\n                        key={index}>\r\n                        <TableCell></TableCell>\r\n                        <TableCell\r\n                          component=\"th\"\r\n                          scope=\"row\"\r\n                          className=\"upper-case\">\r\n                          {index + 1}\r\n                        </TableCell>\r\n                        <TableCell> {investment.ref_no}</TableCell>\r\n                        <TableCell>\r\n                          {\" \"}\r\n                          {numberFormat(investment.amount)}\r\n                        </TableCell>\r\n                        <TableCell> {investment.plan}</TableCell>\r\n                        <TableCell>\r\n                          {\" \"}\r\n                          {numberFormat(investment.balance)}\r\n                        </TableCell>\r\n                        <TableCell> {numberFormat(0)}</TableCell>\r\n                        <TableCell>{numberFormat(0)}</TableCell>\r\n                        <TableCell>\r\n                          {format(new Date(investment?.created_at), \"PP\")}\r\n                        </TableCell>\r\n                        <TableCell\r\n                          className={\r\n                            investment.status === \"pending\" ||\r\n                            investment.status === \"declined\"\r\n                              ? \"red title-case\"\r\n                              : \"green title-case\"\r\n                          }>\r\n                          {\" \"}\r\n                          {investment.status}\r\n                        </TableCell>\r\n                        {/* <TableCell className={user.investments[user.investments.length - 1]?.status === \"open\" || user.investments[user.investments.length - 1]?.status === \"pending\" ? \"red\" : \"green\" }>{user.investments[user.investments.length - 1]?.status == 'pending' || user.investments[user.investments.length - 1]?.status === \"open\" ? 'Minning' : 'Cashed Out' }</TableCell> */}\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </section>\r\n          {/* <Link > */}\r\n\r\n          <div\r\n            className=\"float__action launcher-button\"\r\n            onClick={() => handleClick(userData.id)}>\r\n            Make a deposit <IconButton> + </IconButton>\r\n          </div>\r\n\r\n          {/* </Link> */}\r\n        </>\r\n      )}\r\n      <CryptoCarousel />\r\n      <CoinsTable />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}