{"ast":null,"code":"import _toConsumableArray from\"/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Table from\"@mui/material/Table\";import TableBody from\"@mui/material/TableBody\";import TableCell from\"@mui/material/TableCell\";import TableContainer from\"@mui/material/TableContainer\";import TableHead from\"@mui/material/TableHead\";import TableRow from\"@mui/material/TableRow\";import Paper from\"@mui/material/Paper\";import axios from\"axios\";import{Link,useHistory,useNavigate}from\"react-router-dom\";import{useLoading,Oval}from\"@agney/react-loading\";import{format}from\"date-fns\";import numberFormat from\"../../Util/CurrencyFormatter\";import BASE_URL from\"../../Util/API\";import API from\"../../Util/API\";import{useParams,useLocation}from\"react-router-dom\";import{CLoadingButton}from\"@coreui/react-pro\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import\"./Pages.scss\";import{RestorePageSharp}from\"@material-ui/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var style={position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",width:800,bgcolor:\"background.paper\",boxShadow:24,p:4};function Deposits(){var _useParams=useParams(),id=_useParams.id;var location=useLocation();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),toaster=_useState4[0],setToaster=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loader=_useState6[0],setLoader=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),superAdmin=_useState8[0],setSuperAdmin=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),allDeposits=_useState10[0],setAllDeposits=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),allInvestors=_useState12[0],setAllInvestors=_useState12[1];var _useLoading=useLoading({loading:true,indicator:/*#__PURE__*/_jsx(Oval,{width:\"50\"}),loaderProps:{valueText:\"Please wait, loading records\",style:{position:\"absolute\",left:\"50%\",top:\"50%\"}}}),indicatorEl=_useLoading.indicatorEl;var history=useHistory();useEffect(function(){getAllInvestors();},[]);var getAllInvestors=function getAllInvestors(){// let users = [];\naxios.get(\"\".concat(BASE_URL,\"/users\")).then(function(response){console.log(response);response.data.results.map(function(user){if(user.investments.length>0){setAllDeposits(function(allDeposits){return[].concat(_toConsumableArray(allDeposits),[user]);});}});console.log(allDeposits);}).catch(function(error){console.log(error);toast.error(error.message);});};var handleClick=function handleClick(id){history.push(\"/app/account/\".concat(id));console.log(id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"account__detail\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"summary__title t-xl m-5em\",children:\" Customers Deposit\"})}),/*#__PURE__*/_jsx(\"section\",{className:\"summary al-base\",children:/*#__PURE__*/_jsx(\"div\",{className:\"header__info\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"row\",children:[allDeposits.length===0&&!loader&&/*#__PURE__*/_jsx(\"p\",{className:\"empty__record\",children:\"Oops! No Deposits yet...\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"collapsible table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{children:\"Investor\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Phone\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Country\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Investment\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Amount Due\"}),/*#__PURE__*/_jsx(TableCell,{children:\" Date\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:allDeposits===null||allDeposits===void 0?void 0:allDeposits.map(function(deposit){var _deposit$investments,_deposit$investments2,_deposit$investments3,_deposit$investments4;return/*#__PURE__*/_jsxs(TableRow,{sx:{\"& > *\":{borderBottom:\"unset\"}},onClick:function onClick(){return handleClick(deposit.id);},children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsxs(TableCell,{className:\"title-case\",children:[deposit.first_name,\" \",deposit.last_name]}),/*#__PURE__*/_jsx(TableCell,{children:deposit.email}),/*#__PURE__*/_jsx(TableCell,{children:deposit.phone_1}),/*#__PURE__*/_jsx(TableCell,{children:deposit.country}),/*#__PURE__*/_jsx(TableCell,{children:numberFormat((_deposit$investments=deposit.investments[deposit.investments.length-1])===null||_deposit$investments===void 0?void 0:_deposit$investments.amount)}),/*#__PURE__*/_jsx(TableCell,{children:numberFormat((deposit===null||deposit===void 0?void 0:(_deposit$investments2=deposit.investments[deposit.investments.length-1])===null||_deposit$investments2===void 0?void 0:_deposit$investments2.amount)*0.3+((_deposit$investments3=deposit.investments[deposit.investments.length-1])===null||_deposit$investments3===void 0?void 0:_deposit$investments3.amount))}),/*#__PURE__*/_jsx(TableCell,{children:format(new Date(deposit.created_at),\"PP\")}),/*#__PURE__*/_jsx(TableCell,{className:\"title-case\",children:(_deposit$investments4=deposit.investments[deposit.investments.length-1])===null||_deposit$investments4===void 0?void 0:_deposit$investments4.status})]},deposit.id);})})]})})]})})}),toaster&&/*#__PURE__*/_jsx(ToastContainer,{})]});}export default Deposits;","map":{"version":3,"sources":["/Users/muhammedmusa/Documents/Other-Projects/globaltrade/investment-app/src/Components/Pages/Deposits.js"],"names":["React","useState","useEffect","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","axios","Link","useHistory","useNavigate","useLoading","Oval","format","numberFormat","BASE_URL","API","useParams","useLocation","CLoadingButton","ToastContainer","toast","RestorePageSharp","style","position","top","left","transform","width","bgcolor","boxShadow","p","Deposits","id","location","user","setUser","toaster","setToaster","loader","setLoader","superAdmin","setSuperAdmin","allDeposits","setAllDeposits","allInvestors","setAllInvestors","loading","indicator","loaderProps","valueText","indicatorEl","history","getAllInvestors","get","then","response","console","log","data","results","map","investments","length","catch","error","message","handleClick","push","deposit","borderBottom","first_name","last_name","email","phone_1","country","amount","Date","created_at","status"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Paper from \"@mui/material/Paper\";\nimport axios from \"axios\";\nimport { Link, useHistory, useNavigate } from \"react-router-dom\";\nimport { useLoading, Oval } from \"@agney/react-loading\";\nimport { format } from \"date-fns\";\nimport numberFormat from \"../../Util/CurrencyFormatter\";\nimport BASE_URL from \"../../Util/API\";\nimport API from \"../../Util/API\";\nimport { useParams, useLocation } from \"react-router-dom\";\nimport { CLoadingButton } from \"@coreui/react-pro\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"./Pages.scss\";\nimport { RestorePageSharp } from \"@material-ui/icons\";\n\nconst style = {\n  position: \"absolute\",\n  top: \"50%\",\n  left: \"50%\",\n  transform: \"translate(-50%, -50%)\",\n  width: 800,\n  bgcolor: \"background.paper\",\n  boxShadow: 24,\n  p: 4,\n};\n\nfunction Deposits() {\n  const { id } = useParams();\n  const location = useLocation();\n  const [user, setUser] = useState([]);\n  const [toaster, setToaster] = useState(false);\n  const [loader, setLoader] = useState(true);\n  const [superAdmin, setSuperAdmin] = useState(false);\n  const [allDeposits, setAllDeposits] = useState([]);\n  const [allInvestors, setAllInvestors] = useState([]);\n  const { indicatorEl } = useLoading({\n    loading: true,\n    indicator: <Oval width=\"50\" />,\n    loaderProps: {\n      valueText: \"Please wait, loading records\",\n      style: { position: \"absolute\", left: \"50%\", top: \"50%\" },\n    },\n  });\n  const history = useHistory();\n\n  useEffect(() => {\n    getAllInvestors();\n  }, []);\n\n  const getAllInvestors = () => {\n    // let users = [];\n    axios\n      .get(`${BASE_URL}/users`)\n      .then((response) => {\n        console.log(response);\n        response.data.results.map((user) => {\n          if (user.investments.length > 0) {\n            setAllDeposits((allDeposits) => [...allDeposits, user]);\n          }\n        });\n        console.log(allDeposits);\n      })\n      .catch((error) => {\n        console.log(error);\n        toast.error(error.message);\n      });\n  };\n\n  const handleClick = (id) => {\n    history.push(`/app/account/${id}`);\n    console.log(id);\n  };\n\n  return (\n    <div className=\"account__detail\">\n      <div className=\"d-flex\">\n        <h4 className=\"summary__title t-xl m-5em\"> Customers Deposit</h4>\n        {/* <button className=\"btn bg__green pull-right bold\" name=\"newLoan\" onClick={() => handleNewFormOpen()}> New Investment </button> */}\n      </div>\n      <section className=\"summary al-base\">\n        {/* <div className=\"summary__left w-70\"> */}\n        <div className=\"header__info\">\n          <section className=\"row\">\n            {allDeposits.length === 0 && !loader && (\n              <p className=\"empty__record\">Oops! No Deposits yet...</p>\n            )}\n            <TableContainer component={Paper}>\n              <Table aria-label=\"collapsible table\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell />\n                    <TableCell>Investor</TableCell>\n                    <TableCell>Email</TableCell>\n                    <TableCell>Phone</TableCell>\n                    <TableCell>Country</TableCell>\n                    <TableCell>Investment</TableCell>\n                    {/* <TableCell>duration</TableCell> */}\n                    <TableCell>Amount Due</TableCell>\n                    <TableCell> Date</TableCell>\n                    <TableCell>Status</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {allDeposits?.map((deposit) => {\n                    return (\n                      <TableRow\n                        sx={{ \"& > *\": { borderBottom: \"unset\" } }}\n                        key={deposit.id}\n                        onClick={() => handleClick(deposit.id)}>\n                        <TableCell></TableCell>\n                        <TableCell className=\"title-case\">\n                          {/* {deposit?.ref_no}  */}\n                          {deposit.first_name} {deposit.last_name}\n                        </TableCell>\n                        <TableCell>{deposit.email}</TableCell>\n                        <TableCell>{deposit.phone_1}</TableCell>\n                        <TableCell>{deposit.country}</TableCell>\n                        <TableCell>\n                          {numberFormat(\n                            deposit.investments[deposit.investments.length - 1]\n                              ?.amount\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          {numberFormat(\n                            deposit?.investments[deposit.investments.length - 1]\n                              ?.amount *\n                              0.3 +\n                              deposit.investments[\n                                deposit.investments.length - 1\n                              ]?.amount\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          {format(new Date(deposit.created_at), \"PP\")}\n                        </TableCell>\n                        <TableCell className=\"title-case\">\n                          {\n                            deposit.investments[deposit.investments.length - 1]\n                              ?.status\n                          }\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </section>\n        </div>\n      </section>\n\n      {toaster && <ToastContainer />}\n    </div>\n  );\n}\n\nexport default Deposits;\n"]},"metadata":{},"sourceType":"module"}